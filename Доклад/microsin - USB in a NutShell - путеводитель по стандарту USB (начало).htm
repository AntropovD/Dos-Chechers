<!--?xml version="1.0"?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
  <title>microsin - USB in a NutShell - путеводитель по стандарту USB (начало)</title>
<meta name="description" content="Ќачало перевода на русский €зык &quot;USB in a NutShell&quot;">
<meta name="keywords" content="USB, HID, host, VID, PID, Control, Interrupt, Bulk, Isochronous, VBUS, endpoint, descriptor, interface, PIC16F876, PDIUSBD11">
<meta name="Generator" content="Joomla! - јвторские права (C) 2005-2007 OSM. ¬се права защищены.">
<meta name="robots" content="index, follow">
<link href="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/style.css" rel="stylesheet" type="text/css">
<script language="JavaScript" type="text/javascript" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/proofreader.js"></script>
<script language="JavaScript" type="text/javascript" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/xajax.js"></script>
<script language="JavaScript" type="text/javascript"><!-- // --><![CDATA[
	function pr_setup() {
		xajaxRequestUri='http://microsin.ru/index2.php?option=com_proofreader&task=sendmistake&no_html=1';
		xajaxWaitCursor=true;
		xajaxDefinedPost=1;
		xajaxDebug=false;
		xajaxStatusMessages=false;
		xajaxDefinedGet=0;
	}

	function addEvent(element, eventType, functionName) {
		if (element.addEventListener) {
			element.addEventListener(eventType, functionName, false);
			return true;
		} else if (element.attachEvent) {
			var r = element.attachEvent('on' + eventType, functionName);
			return r;
		} else {
			element['on' + eventType] = functionName;
		}
	}

	function addDivWindow() {
		var x=document.createElement("div");
		x.id='MistWindow';
		x.style.position='absolute';
		x.style.display='none';
		x.style.width='375px';
		x.style.height='380px';
		x.style.top='50px';
		x.style.left='50px';
		x.style.zIndex=2;
		document.body.appendChild(x);
	}


var xajaxRequestUri='http://microsin.ru/index2.php?option=com_proofreader&task=sendmistake&no_html=1';
var xajaxWaitCursor=true;
var xajaxDefinedPost=1;
var xajaxDebug=false;
var xajaxStatusMessages=false;
var xajaxDefinedGet=0;
var PReader_cur_page = "http://microsin.ru/index.php?option=com_content&task=view&id=1107&Itemid=44"; var pr_alt = false;  var pr_shift = true;  var pr_ctrl = false; 
addEvent(window, 'load',  addDivWindow);
addEvent(window, 'load',  keyPressInit);
// ]]></script>
<link rel="alternate" type="application/rss+xml" title="USB in a NutShell - путеводитель по стандарту USB (начало)" href="http://microsin.ru/index2.php?option=com_jcomments&amp;task=rss&amp;object_id=1107&amp;object_group=com_content&amp;no_html=1">
<!-- base href="http://microsin.ru/" -->
	<link rel="shortcut icon" href="http://microsin.ru/favicon.ico">
	  <link href="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/template_css.css" rel="stylesheet" type="text/css">
  <!-- <link rel="shortcut icon" href="http://microsin.ru/images/favicon.ico" /> -->
  <link rel="shortcut gif" href="http://microsin.ru/images/favicon16x16-8b.gif">
<style id="ya_share_style" type="text/css">.b-share-popup-wrap{z-index:1073741823;position:absolute;width:500px}.b-share-popup{position:absolute;z-index:1073741823;border:1px solid #888;background:#FFF;color:#000}.b-share-popup-wrap .b-share-popup_down{top:0}.b-share-popup-wrap .b-share-popup_up{bottom:0}.b-share-popup-wrap_state_hidden{position:absolute!important;top:-9999px!important;right:auto!important;bottom:auto!important;left:-9999px!important;visibility:hidden!important}.b-share-popup,x:nth-child(1){border:0;padding:1px!important}@media all and (resolution=0){.b-share-popup,x:nth-child(1),x:-o-prefocus{padding:0!important;border:1px solid #888}}.b-share-popup__i{display:-moz-inline-box;display:inline-block;padding:5px 0!important;overflow:hidden;vertical-align:top;white-space:nowrap;visibility:visible;background:#FFF;-webkit-box-shadow:0 2px 9px rgba(0,0,0,.6);-moz-box-shadow:0 2px 9px rgba(0,0,0,.6);box-shadow:0 2px 9px rgba(0,0,0,.6)}.b-share-popup__item{font:1em/1.25em Arial,sans-serif;display:block;padding:5px 15px!important;white-space:nowrap;background:#FFF}.b-share-popup__item,a.b-share-popup__item:link,a.b-share-popup__item:visited{text-decoration:none!important;border:0!important}a.b-share-popup__item{cursor:pointer}a.b-share-popup__item .b-share-popup__item__text{display:inline;text-decoration:underline;color:#1A3DC1}a.b-share-popup__item:hover{word-spacing:0}a.b-share-popup__item:hover .b-share-popup__item__text{color:red;cursor:pointer}.b-share-popup__icon{display:-moz-inline-box;display:inline-block;margin:-3px 0 0;padding:0 5px 0 0!important;vertical-align:middle}.b-share-popup__icon_input{width:21px;height:16px;margin-top:-6px;padding:0!important}.b-share-popup__icon__input{margin-right:0;margin-left:2px;vertical-align:top}.b-share-popup__spacer{display:block;padding-top:10px!important}.b-share-popup__header{font:86%/1em Verdana,sans-serif;display:block;padding:10px 15px 5px!important;color:#999}.b-share-popup__header_first{padding-top:5px!important}.b-share-popup__input{font:86%/1em Verdana,sans-serif;display:block;padding:5px 15px!important;color:#999;text-align:left}.b-share-popup__input__input{font:1em/1em Verdana,sans-serif;display:block;width:10px;margin:5px 0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:none;text-align:left;direction:ltr}.b-share-popup_down .b-share-popup_with-link .b-share-popup__input_link{position:absolute;top:5px;right:0;left:0}.b-share-popup_up .b-share-popup_with-link .b-share-popup__input_link{position:absolute;right:0;bottom:5px;left:0}.b-share-popup_down .b-share-popup_with-link{padding-top:55px!important}.b-share-popup_up .b-share-popup_with-link{padding-bottom:55px!important}.b-share-popup_down .b-share-popup_expandable .b-share-popup__main{padding-bottom:25px!important}.b-share-popup_up .b-share-popup_expandable .b-share-popup__main{padding-top:25px!important}.b-share-popup_down .b-share-popup_yandexed{padding-bottom:10px!important}.b-share-popup_up .b-share-popup_yandexed{padding-top:10px!important}.b-share-popup__yandex{position:absolute;right:4px;bottom:2px;font:78.125%/1em Verdana,sans-serif;padding:3px!important;background:0 0}a.b-share-popup__yandex:link,a.b-share-popup__yandex:visited{color:#C6C5C5;text-decoration:none}a.b-share-popup__yandex:link:hover,a.b-share-popup__yandex:visited:hover{color:red;text-decoration:underline}.b-share-popup_up .b-share-popup__yandex{top:2px;bottom:auto}.b-share-popup_expandable .b-share-popup__yandex{right:auto;left:4px}.b-share-popup_to-right .b-share-popup_expandable .b-share-popup__yandex{right:4px;left:auto}.b-share-popup__expander .b-share-popup__item{position:absolute;bottom:5px;font:86%/1em Verdana,sans-serif;margin:10px 0 0;padding:5px 10px!important;cursor:pointer;color:#999;background:0 0}.b-share-popup_to-right,.b-share-popup_to-right .b-share-popup__expander{direction:rtl}.b-share-popup_to-right .b-share-popup__expander .b-share-popup__icon{padding:0 0 0 5px!important}.b-share-popup_up .b-share-popup__expander .b-share-popup__item{top:-5px;bottom:auto}.b-share-popup__expander .b-share-popup__item:hover .b-share-popup__item__text{text-decoration:underline}.b-share-popup__expander .b-ico_action_rarr,.b-share-popup_to-right .b-share-popup__expander .b-ico_action_larr,.b-share-popup_full .b-share-popup__expander .b-ico_action_larr,.b-share-popup_to-right .b-share-popup_full .b-share-popup__expander .b-ico_action_rarr,.b-share-popup__expander .b-share-popup__item__text_collapse,.b-share-popup_full .b-share-popup__item__text_expand{display:none}.b-share-popup_to-right .b-share-popup__expander .b-ico_action_rarr,.b-share-popup_full .b-share-popup__item__text_collapse,.b-share-popup_full .b-share-popup__expander .b-ico_action_rarr,.b-share-popup_to-right .b-share-popup_full .b-share-popup__expander .b-ico_action_larr{display:inline}.b-ico_action_rarr,.b-ico_action_larr{width:8px;height:7px;border:0}.b-share-popup__main,.b-share-popup__extra{direction:ltr;vertical-align:bottom;text-align:left}.b-share-popup_down .b-share-popup__main,.b-share-popup_down .b-share-popup__extra{vertical-align:top}.b-share-popup__main{display:-moz-inline-stack;display:inline-block}.b-share-popup__extra{display:none;margin:0 -10px 0 0}.b-share-popup_full .b-share-popup__extra{display:-moz-inline-stack;display:inline-block}.b-share-popup_to-right .b-share-popup__extra{margin:0 0 0 -10px}.b-share-popup__tail{position:absolute;width:21px;height:10px;margin:0 0 0 -11px}.b-share-popup_down .b-share-popup__tail{top:-10px;background:url("//yastatic.net/share/static/b-share-popup_down__tail.gif") 0 0 no-repeat}.b-share-popup_up .b-share-popup__tail{bottom:-10px;background:url("//yastatic.net/share/static/b-share-popup_up__tail.gif") 0 0 no-repeat}.b-share-popup_down .b-share-popup__tail,x:nth-child(1){top:-9px;background-image:url("//yastatic.net/share/static/b-share-popup_down__tail.png")}.b-share-popup_up .b-share-popup__tail,x:nth-child(1){bottom:-9px;background-image:url("//yastatic.net/share/static/b-share-popup_up__tail.png")}@media all and (resolution=0){.b-share-popup_down .b-share-popup__tail,x:nth-child(1),x:-o-prefocus{top:-10px;background-image:url("//yastatic.net/share/static/b-share-popup_down__tail.gif")}.b-share-popup_up .b-share-popup__tail,x:nth-child(1),x:-o-prefocus{bottom:-10px;background-image:url("//yastatic.net/share/static/b-share-popup_up__tail.gif")}}.b-share-popup .b-share-popup_show_form_mail,.b-share-popup .b-share-popup_show_form_html{padding:0!important}.b-share-popup .b-share-popup_show_form_mail .b-share-popup__main,.b-share-popup .b-share-popup_show_form_html .b-share-popup__main,.b-share-popup .b-share-popup_show_form .b-share-popup__main,.b-share-popup .b-share-popup_show_form_mail .b-share-popup__extra,.b-share-popup .b-share-popup_show_form_html .b-share-popup__extra,.b-share-popup .b-share-popup_show_form .b-share-popup__extra{height:15px;padding:0!important;overflow:hidden;visibility:hidden}.b-share-popup_show_form_mail .b-share-popup__expander,.b-share-popup_show_form_html .b-share-popup__expander,.b-share-popup_show_form .b-share-popup__expander,.b-share-popup_show_form_mail .b-share-popup__input_link,.b-share-popup_show_form_html .b-share-popup__input_link,.b-share-popup_show_form .b-share-popup__input_link{display:none}.b-share-popup__form{position:relative;display:none;overflow:hidden;padding:5px 0 0!important;margin:0 0 -15px;white-space:normal}.b-share-popup_show_form_mail .b-share-popup__form_mail,.b-share-popup_show_form_html .b-share-popup__form_html,.b-share-popup_show_form .b-share-popup__form{display:block}.b-share-popup__form__link{padding:5px!important;margin:0 0 5px 10px;text-decoration:underline;cursor:pointer;color:#1A3DC1}.b-share-popup__form__link,.b-share-popup__form__button{font:86%/1.4545em Verdana,sans-serif;float:left;display:inline}.b-share-popup__form__button{margin:5px 0 0 15px}.b-share-popup__form__close{font:86%/1.4545em Verdana,sans-serif;float:right;display:inline;padding:5px!important;margin:0 10px 5px 0;cursor:pointer;color:#999}a.b-share-popup__form__link:hover,a.b-share-popup__form__close:hover{text-decoration:underline;color:red}.b-share-popup_font_fixed .b-share-popup__item{font-size:12.8px}.b-share-popup_font_fixed .b-share-popup__header,.b-share-popup_font_fixed .b-share-popup__input,.b-share-popup_font_fixed .b-share-popup__expander .b-share-popup__item,.b-share-popup_font_fixed .b-share-popup__form__link,.b-share-popup_font_fixed .b-share-popup__form__button,.b-share-popup_font_fixed .b-share-popup__form__close{font-size:11px}.b-share-popup_font_fixed .b-share-popup__yandex{font-size:10px}.b-share-form-button{font:86%/17px Verdana,Arial,sans-serif;display:-moz-inline-box;display:inline-block;position:relative;height:19px;margin:0 3px;padding:0 4px;cursor:default;white-space:nowrap;text-decoration:none!important;color:#000!important;border:none;outline:none;background:url("//yastatic.net/share/static/b-share-form-button.png") 0 -20px repeat-x}.b-share-form-button:link:hover,.b-share-form-button:visited:hover{color:#000!important}.b-share-form-button__before,.b-share-form-button__after{position:absolute;width:3px;height:19px;background:url("//yastatic.net/share/static/b-share-form-button.png")}.b-share-form-button__before{margin-left:-7px}.b-share-form-button__after{margin-left:4px;background-position:-3px 0}.b-share-form-button::-moz-focus-inner{border:none}button.b-share-form-button .b-share-form-button__before,button.b-share-form-button .b-share-form-button__after{margin-top:-1px}@-moz-document url-prefix(){button.b-share-form-button .b-share-form-button__after{margin-top:-2px;margin-left:6px}button.b-share-form-button .b-share-form-button__before{margin-top:-2px;margin-left:-9px}}SPAN.b-share-form-button:hover,.b-share-form-button_state_hover{background-position:0 -60px}SPAN.b-share-form-button:hover .b-share-form-button__before,.b-share-form-button_state_hover .b-share-form-button__before{background-position:0 -40px}SPAN.b-share-form-button:hover .b-share-form-button__after,.b-share-form-button_state_hover .b-share-form-button__after{background-position:-3px -40px}.b-share-form-button_state_pressed,.b-share-form-button_state_pressed .b-share-form-button_share{background-position:0 -100px!important}.b-share-form-button_state_pressed .b-share-form-button__before{background-position:0 -80px!important}.b-share-form-button_state_pressed .b-share-form-button__after{background-position:-3px -80px!important}button.b-share-form-button_state_pressed{overflow:visible}.b-share-form-button_icons{position:relative;padding:0;background-position:0 -20px!important}.b-share-form-button_icons .b-share-form-button__before{left:0;margin-left:-3px;background-position:0 0!important}.b-share-form-button_icons .b-share-form-button__after{z-index:-1;margin-left:0;background-position:-3px 0!important}.b-share-form-button_icons .b-share__handle{padding:2px!important}.b-share-form-button_icons .b-share__handle_more{position:relative;padding-right:6px!important;margin-right:-4px}.b-share-form-button_icons .b-share-icon{opacity:.5;background-image:url("//yastatic.net/share/static/b-share-icon_size_14.png")}.b-share-form-button_icons A.b-share__handle:hover .b-share-icon{opacity:1}.b-share{font:86%/1.4545em Arial,sans-serif;display:-moz-inline-box;display:inline-block;padding:1px 3px 1px 4px!important;vertical-align:middle}.b-share .b-share-form-button{font-size:1em}.b-share__text .b-share-icon{margin:0 5px 0 0;border:none}.b-share__text{margin-right:5px}.b-share__handle{float:left;height:16px;padding:5px 3px 5px 2px!important;cursor:pointer;text-align:left;text-decoration:none!important}.b-share__handle_cursor_default{cursor:default}.b-share__handle .b-share-form-button{margin-top:-2px}.b-share__hr{display:none;float:left;width:1px;height:26px;margin:0 3px 0 2px}a.b-share__handle:hover .b-share__text{text-decoration:underline;color:red}.b-share_bordered{padding:0 2px 0 3px!important;border:1px solid #E4E4E4;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.b-share_bordered .b-share__hr{display:inline;background:#E4E4E4}.b-share_link{margin:-8px 0}a.b-share_link{margin:0}.b-share_link .b-share__text{text-decoration:underline;color:#1A3DC1}.b-share-form-button_share{padding-left:26px!important;vertical-align:top}.b-share-form-button_share .b-share-form-button__before{margin-left:-29px}.b-share-form-button_share .b-share-form-button__icon{position:absolute;width:20px;height:17px;margin:1px 0 0 -23px;background:url("//yastatic.net/share/static/b-share-form-button_share__icon.png") 0 0 no-repeat}.b-share-pseudo-link{border-bottom:1px dotted;cursor:pointer;text-decoration:none!important}.b-share_font_fixed{font-size:11px}.b-share__handle_more{font-size:9px;margin-top:-1px;color:#7B7B7B}A.b-share__handle_more:hover{color:#000}.b-share__group{float:left}.b-share-icon{float:left;display:inline;overflow:hidden;width:16px;height:16px;padding:0!important;vertical-align:top;border:0;background:url("//yastatic.net/share/static/b-share-icon.png") 0 99px no-repeat}.b-share-icon_vkontakte,.b-share-icon_custom{background-position:0 0}.b-share-icon_yaru,.b-share-icon_yaru_photo,.b-share-icon_yaru_wishlist{background-position:0 -17px}.b-share-icon_lj{background-position:0 -34px}.b-share-icon_twitter{background-position:0 -51px}.b-share-icon_facebook{background-position:0 -68px}.b-share-icon_moimir{background-position:0 -85px}.b-share-icon_friendfeed{background-position:0 -102px}.b-share-icon_mail{background-position:0 -119px}.b-share-icon_html{background-position:0 -136px}.b-share-icon_postcard{background-position:0 -153px}.b-share-icon_odnoklassniki{background-position:0 -170px}.b-share-icon_blogger{background-position:0 -187px}.b-share-icon_delicious{background-position:0 -221px}.b-share-icon_gbuzz{background-position:0 -238px}.b-share-icon_linkedin{background-position:0 -255px}.b-share-icon_myspace{background-position:0 -272px}.b-share-icon_evernote{background-position:0 -289px}.b-share-icon_digg{background-position:0 -306px}.b-share-icon_juick{background-position:0 -324px}.b-share-icon_moikrug{background-position:0 -341px}.b-share-icon_yazakladki{background-position:0 -358px}.b-share-icon_liveinternet{background-position:0 -375px}.b-share-icon_tutby{background-position:0 -392px}.b-share-icon_diary{background-position:0 -409px}.b-share-icon_gplus{background-position:0 -426px}.b-share-icon_pocket{background-position:0 -443px}.b-share-icon_surfingbird{background-position:0 -460px}.b-share-icon_pinterest{background-position:0 -477px}.b-share-icon_renren{background-position:0 0}.b-share-icon_renren,.b-share-icon_sina_weibo{background:url("//yastatic.net/share/static/b-share-icon__china.png") no-repeat}.b-share-icon_sina_weibo{background-position:-18px 0}.b-share-icon_qzone{background-position:-36px 0}.b-share-icon_qzone,.b-share-icon_tencent_weibo{background:url("//yastatic.net/share/static/b-share-icon__china.png") no-repeat}.b-share-icon_tencent_weibo{background-position:-54px 0}.b-share_theme_dark .b-share-icon{background:url("//yastatic.net/share/static/b-share-icons__theme_dark.png") 99px 0 no-repeat}.b-share_theme_dark .b-share-icon_odnoklassniki{background-position:-4px -3px}.b-share_theme_dark .b-share-icon_vkontakte{background-position:-24px -3px}.b-share_theme_dark .b-share-icon_twitter{background-position:-44px -3px}.b-share_theme_dark .b-share-icon_facebook{background-position:-64px -3px}.b-share_theme_dark .b-share-icon_lj{background-position:-85px -3px}.b-share_theme_dark .b-share-icon_yaru{background-position:-105px -3px}.b-share_theme_dark .b-share-popup .b-share-icon_odnoklassniki,.b-share_theme_dark .b-share-icon_odnoklassniki:hover{background-position:-4px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_vkontakte,.b-share_theme_dark .b-share-icon_vkontakte:hover{background-position:-24px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_twitter,.b-share_theme_dark .b-share-icon_twitter:hover{background-position:-44px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_facebook,.b-share_theme_dark .b-share-icon_facebook:hover{background-position:-64px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_lj,.b-share_theme_dark .b-share-icon_lj:hover{background-position:-85px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_yaru,.b-share_theme_dark .b-share-icon_yaru:hover{background-position:-105px -28px}.b-share_theme_dark .b-share-form-button_share .b-share-form-button__icon{background-image:url("//yastatic.net/share/static/b-share-form-button_share__icon_dark.png")}.b-share_theme_dark .b-share-form-button{color:#fff!important;opacity:.8}.b-share_theme_dark .b-share__handle:hover .b-share-form-button,.b-share_theme_dark .b-share-form-button:hover{opacity:1;cursor:pointer}.b-share_theme_dark .b-share-form-button,.b-share_theme_dark .b-share-form-button__before,.b-share_theme_dark .b-share-form-button__after{background:0 0}.b-share_theme_dark .b-share-popup__i{background-color:#333;border-radius:10px;-webkit-box-shadow:0 2px 9px rgba(255,255,255,.6);-moz-box-shadow:0 2px 9px rgba(255,255,255,.6);box-shadow:0 2px 9px rgba(255,255,255,.6)}.b-share_theme_dark .b-share__text{color:#AAA}.b-share_theme_dark .b-share-popup{color:#AAA;border-radius:10px;background-color:#333;background-color:rgba(50,50,50,.3)}.b-share_theme_dark .b-share-popup__item{background:0 0;color:#ccc}.b-share_theme_dark .b-share-popup .b-share-popup__item__text{color:#ccc}.b-share_theme_counter .b-share{display:inline-block;vertical-align:middle;white-space:nowrap}.b-share-counter{font:14px Arial,sans-serif;line-height:18px;display:none;float:left;margin:3px 6px 3px 3px;color:#fff}.b-share_theme_counter .b-share_type_small .b-share-counter{font-size:11px;line-height:14px;margin:2px 6px 2px 1px}.b-share_theme_counter .b-share-btn__counter .b-share-counter{display:block}.b-share-btn__counter{text-decoration:none}.b-share_theme_counter .b-share-btn__wrap{position:relative;float:left;margin-left:5px}.b-share_theme_counter .b-share_type_small .b-share-btn__wrap{margin-left:4px}.b-share_theme_counter .b-share-btn__wrap:first-child{margin-left:0}.b-share_theme_counter .b-share__link{display:inline-block;cursor:pointer;-webkit-border-radius:3px;border-radius:3px}.b-share_theme_counter .b-share_type_small .b-share__link{-webkit-border-radius:2px;border-radius:2px}.b-share_theme_counter .b-share-icon{display:block;float:left;width:24px;height:24px;background-image:url("//yastatic.net/share/static/b-share_counter_large.png");background-position:-20px 0}.b-share_theme_counter .b-share_type_small .b-share-icon{width:18px;height:18px;background-image:url("//yastatic.net/share/static/b-share_counter_small.png")}.b-share_theme_counter .b-share-icon_facebook{background-position:0 0}.b-share_theme_counter .b-share-btn__facebook{background-color:#3c5a98}.b-share_theme_counter .b-share-btn__facebook:hover{background-color:#30487a}.b-share_theme_counter .b-share-btn__facebook:active{border-top:2px solid #24365a;background-color:#334d81}.b-share_theme_counter .b-share-icon_moimir{background-position:0 -29px}.b-share_theme_counter .b-share-btn__moimir{background-color:#226eb7}.b-share_theme_counter .b-share-btn__moimir:hover{background-color:#1b5892}.b-share_theme_counter .b-share-btn__moimir:active{border-top:2px solid #14426d;background-color:#1d5e9c}.b-share_theme_counter .b-share-icon_vkontakte{background-position:0 -58px}.b-share_theme_counter .b-share-btn__vkontakte{background-color:#48729e}.b-share_theme_counter .b-share-btn__vkontakte:hover{background-color:#3a5b7e}.b-share_theme_counter .b-share-btn__vkontakte:active{border-top:2px solid #2b445e;background-color:#3d6186}.b-share_theme_counter .b-share-icon_twitter{background-position:0 -87px}.b-share_theme_counter .b-share-btn__twitter{background-color:#00aced}.b-share_theme_counter .b-share-btn__twitter:hover{background-color:#008abe}.b-share_theme_counter .b-share-btn__twitter:active{border-top:2px solid #00668d;background-color:#0092ca}.b-share_theme_counter .b-share-icon_odnoklassniki{background-position:0 -116px}.b-share_theme_counter .b-share-btn__odnoklassniki{background-color:#ff9f4d}.b-share_theme_counter .b-share-btn__odnoklassniki:hover{background-color:#cc7f3e}.b-share_theme_counter .b-share-btn__odnoklassniki:active{border-top:2px solid #975e2e;background-color:#d98742}.b-share_theme_counter .b-share-icon_gplus{background-position:0 -145px}.b-share_theme_counter .b-share-btn__gplus{background-color:#c25234}.b-share_theme_counter .b-share-btn__gplus:hover{background-color:#9b422a}.b-share_theme_counter .b-share-btn__gplus:active{border-top:2px solid #73311f;background-color:#a5462c}.b-share_theme_counter .b-share-icon_yaru{background-position:0 -174px}.b-share_theme_counter .b-share-btn__yaru{background-color:#d83933}.b-share_theme_counter .b-share-btn__yaru:hover{background-color:#ad2e29}.b-share_theme_counter .b-share-btn__yaru:active{border-top:2px solid #80221e;background-color:#b8312b}.b-share_theme_counter .b-share-icon_pinterest{background-position:0 -203px}.b-share_theme_counter .b-share-btn__pinterest{background-color:#cd1e27}.b-share_theme_counter .b-share-btn__pinterest:hover{background-color:#a4181f}.b-share_theme_counter .b-share-btn__pinterest:active{border-top:2px solid #7b1217;background-color:#ae1921}.b-share_theme_counter .b-share__link:active{height:22px}.b-share_theme_counter .b-share_type_small .b-share__link:active{height:16px}.b-share_theme_counter .b-share__link:active .b-share-icon,.b-share_theme_counter .b-share__link:active .b-share-counter{position:relative;top:-1px}.b-share_theme_counter .b-share__link::after{position:absolute;top:0;right:0;bottom:0;left:0;content:"";background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)}.b-share_theme_counter .b-share__handle{height:auto;padding:0!important}</style></head>

<body topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0">
<a name="top" id="top"></a>
  <table align="center" border="0" cellpadding="0" cellspacing="0" width="780">
    <tbody><tr height="20">
      <td>&nbsp;</td>
      <td width="100%">&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td background="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20(%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE)_files/shad_left.gif" valign="top">
      <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/shad_top_left.gif" border="0" height="17" width="11"></td>
      <td valign="top" width="100%">
      <table bgcolor="#000000" border="0" cellspacing="1" width="100%">
        <tbody><tr>
          <td width="100%">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
              <tbody><tr>
                <td class="pathway" align="left" valign="center"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/arrow.png" hspace="5"><span class="pathway"><a href="http://microsin.ru/" class="pathway">√лавна€</a> <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/arrow.png" alt="arrow"> <a href="http://microsin.ru/content/section/5/44/" class="pathway">ѕрограммирование</a> <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/arrow.png" alt="arrow"> <a href="http://microsin.ru/content/category/5/26/44/" class="pathway">AVR</a> <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/arrow.png" alt="arrow">   USB in a NutShell - путеводитель по стандарту USB (начало) </span></td>
                <td class="pathway" align="right" valign="center">Tuesday, October 20 2015&nbsp;&nbsp;</td>
              </tr>
            </tbody></table>
          </td>
        </tr>
        <tr height="80">
          <td background="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20(%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE)_files/logo_bar_back.gif" bgcolor="#54647A" width="100%"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/logo_bar_logo.jpg" border="0"></td>
        </tr>
        <tr>
          <td background="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20(%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE)_files/but_bar_back.gif" bgcolor="#AFC6DB" width="100%">
          <table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td width="2"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/but_bar_divider.gif"></td><td align="center" width="20%"><a class="buttonbar" href="http://microsin.ru/index.php?option=com_frontpage&amp;Itemid=1">√лавна€</a></td><td width="2"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/but_bar_divider.gif"></td><td align="center" width="20%"><a class="buttonbar" href="http://microsin.ru/index.php?option=com_content&amp;task=view&amp;id=383&amp;Itemid=45"> онтакты</a></td><td width="2"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/but_bar_divider.gif"></td><td align="center" width="20%"><a class="buttonbar" href="http://microsin.ru/index.php?option=com_content&amp;task=section&amp;id=4&amp;Itemid=43">јдминистрирование</a></td><td width="2"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/but_bar_divider.gif"></td><td align="center" width="20%"><a class="buttonbar" href="http://microsin.ru/index.php?option=com_content&amp;task=section&amp;id=5&amp;Itemid=44">ѕрограммирование</a></td><td width="2"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/but_bar_divider.gif"></td><td align="center" width="20%"><a class="buttonbar" href="http://microsin.ru/index.php?option=com_weblinks&amp;catid=15&amp;Itemid=34">—сылки</a></td><td width="2"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/but_bar_divider.gif"></td></tr></tbody></table>          </td>
        </tr>
        <tr>
          <td bgcolor="#FFFFFF" width="100%">
          <table style="border-collapse: collapse" id="AutoNumber1" border="0" cellpadding="4" cellspacing="0" width="100%">
            <tbody><tr>
              <!-- LEFT Modules -->
                                <td bgcolor="#F0F0F0" valign="top" width="150">
                    <div class="modules">
                    		<table class="moduletable" cellpadding="0" cellspacing="0">
				<tbody><tr>
			<td>
				<noindex><table border="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/UK-flag-ico.png" alt="UK-flag-ico.png" title="English site version" align="bottom"></td>
			<td><a href="http://translate.google.ru/translate?hl=ru&amp;sl=ru&amp;tl=en&amp;u=http%3A%2F%2Fmicrosin.ru%2F">English Version</a></td>
		</tr>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/GERMAN-flag-ico.png" alt="GERMAN-flag-ico.png" title="Die deutsche Version der Webseite" align="bottom"></td>
			<td><a href="http://translate.google.ru/translate?hl=ru&amp;sl=ru&amp;tl=de&amp;u=http%3A%2F%2Fmicrosin.ru%2F">Die deutsche Version</a></td>
		</tr>
	</tbody>
</table></noindex>			</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
				<tbody><tr>
			<td>
				<!--<a href=http://microsin.ru/index.php?option=com_xmap&sitemap=1>   арта сайта  </a>-->
<table border="0">
	<tbody>
		<tr>
			<td><a href="http://microsin.ru/index.php?option=com_rd_rss&amp;id=3" target="_self"></a><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/map.gif" alt="map.gif" title="карта сайта" style="margin: 5px" class="jce_tooltip" align="bottom">
			</td>
			<td><a target="_self" href="http://microsin.ru/index.php?option=com_xmap&amp;sitemap=1">карта сайта</a>
			</td>
		</tr>
	</tbody>
</table>			</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
				<tbody><tr>
			<td>
				
<form action="index.php?option=com_search" method="get">
	<div class="search">
		<input name="searchword" id="mod_search_searchword" maxlength="20" alt="search" class="inputbox" size="26" value="поиск..." onblur="if(this.value=='') this.value='поиск...';" onfocus="if(this.value=='поиск...') this.value='';" type="text">	</div>

	<input name="option" value="com_search" type="hidden">
	<input name="Itemid" value="" type="hidden">	
</form>			</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
					<tbody><tr>
				<th valign="top">
					нашли опечатку?				</th>
			</tr>
					<tr>
			<td>
				<p align="justify">
ѕожалуйста, сообщите об этом - просто выделите ошибочное слово или фразу и нажмите <strong>Shift Enter</strong>.
</p>
			</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
					<tbody><tr>
				<th valign="top">
					ѕоделитьс€:				</th>
			</tr>
					<tr>
			<td>
				<!-- http://api.yandex.ru/share/ -->
<script type="text/javascript" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/share.js" charset="utf-8"></script> <div class="yashare-auto-init" data-yasharel10n="ru" data-yasharetype="none" data-yasharequickservices="vkontakte,facebook,twitter,moimir,lj,yaru,friendfeed"><span class="b-share"><a rel="nofollow" target="_blank" title="¬ онтакте" class="b-share__handle b-share__link b-share-btn__vkontakte" href="https://share.yandex.net/go.xml?service=vkontakte&amp;url=http%3A%2F%2Fmicrosin.ru%2Fcontent%2Fview%2F1107%2F44%2F&amp;title=microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29" data-service="vkontakte"><span class="b-share-icon b-share-icon_vkontakte"></span></a><a rel="nofollow" target="_blank" title="Facebook" class="b-share__handle b-share__link b-share-btn__facebook" href="https://share.yandex.net/go.xml?service=facebook&amp;url=http%3A%2F%2Fmicrosin.ru%2Fcontent%2Fview%2F1107%2F44%2F&amp;title=microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29" data-service="facebook"><span class="b-share-icon b-share-icon_facebook"></span></a><a rel="nofollow" target="_blank" title="Twitter" class="b-share__handle b-share__link b-share-btn__twitter" href="https://share.yandex.net/go.xml?service=twitter&amp;url=http%3A%2F%2Fmicrosin.ru%2Fcontent%2Fview%2F1107%2F44%2F&amp;title=microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29" data-service="twitter"><span class="b-share-icon b-share-icon_twitter"></span></a><a rel="nofollow" target="_blank" title="ћой ћир" class="b-share__handle b-share__link b-share-btn__moimir" href="https://share.yandex.net/go.xml?service=moimir&amp;url=http%3A%2F%2Fmicrosin.ru%2Fcontent%2Fview%2F1107%2F44%2F&amp;title=microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29" data-service="moimir"><span class="b-share-icon b-share-icon_moimir"></span></a><a rel="nofollow" target="_blank" title="LiveJournal" class="b-share__handle b-share__link b-share-btn__lj" href="https://share.yandex.net/go.xml?service=lj&amp;url=http%3A%2F%2Fmicrosin.ru%2Fcontent%2Fview%2F1107%2F44%2F&amp;title=microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29" data-service="lj"><span class="b-share-icon b-share-icon_lj"></span></a></span></div>			</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
				<tbody><tr>
			<td>
							</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
				<tbody><tr>
			<td>
				<script type="text/javascript"><!--
google_ad_client = "pub-0017271818132240";
/* 120x90, создано 01.04.09 */
google_ad_slot = "3220443019";
google_ad_width = 120;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/show_ads.js">
</script>			</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
				<tbody><tr>
			<td>
				<noindex>
<!--LiveInternet counter--><script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/stat/microsin.ru/' "+
"target=_blank><img src='http://counter.yadro.ru/hit?t15.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: показано число просмотров за 24"+
" часа, посетителей за 24 часа и за сегодн€' "+
"border='0' width='88' height='31'><\/a>")
//--></script><a href="http://www.liveinternet.ru/stat/microsin.ru/" target="_blank"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/hit.gif" alt="" title="LiveInternet: показано число просмотров за 24 часа, посетителей за 24 часа и за сегодн€" border="0" height="31" width="88"></a><!--/LiveInternet-->
</noindex>
			</td>
		</tr>
		</tbody></table>
				<table class="moduletable" cellpadding="0" cellspacing="0">
				<tbody><tr>
			<td>
				<div id="RTBDIV_9862"> 
        <div id="RTBPL_9862"> 
            <a href="http://rtbsystem.com/ru/advertiser/request">ƒобавить рекламное объ€вление</a> 
        </div> 
</div> 
<script type="text/javascript"> 
    if (document.getElementById('RTBDIV_9862')) { 
        var I9862SD = new Date(); 
        document.write('<scr'+'ipt type="text/javascript" async ' 
            +'src="http://code.rtbsystem.com/9862.js?t='+I9862SD.getYear()+I9862SD.getMonth() 
            +I9862SD.getDay()+I9862SD.getHours() + '" charset="utf-8" ></scr'+'ipt>'); 
    } 
</script><script type="text/javascript" async="" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/9862.js" charset="utf-8"></script>			</td>
		</tr>
		</tbody></table>
		<br> <!-- это дл€ отступа от последнего модул€ -->
                    </div>
                  </td>
                                <td valign="top">
              <!-- Top Modules -->
                            				<table class="contentpaneopen">
			<tbody><tr>
								<td class="contentheading" width="100%">
					USB in a NutShell - путеводитель по стандарту USB (начало)									</td>
								<td class="buttonheading" align="right" width="100%">
					<a href="http://microsin.ru/index2.php?option=com_content&amp;task=view&amp;id=1107&amp;pop=1&amp;page=0&amp;Itemid=44" target="_blank" onclick="window.open('http://microsin.ru/index2.php?option=com_content&amp;task=view&amp;id=1107&amp;pop=1&amp;page=0&amp;Itemid=44','win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;" title="¬ерси€ дл€ печати">
						<img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/printButton.png" alt="¬ерси€ дл€ печати" name="¬ерси€ дл€ печати" align="middle" border="0"></a>
				</td>
							</tr>
			</tbody></table>
			
		<table class="contentpaneopen">
					<tbody><tr>
				<td colspan="2" align="left" valign="top" width="70%">
					<span class="small">
						 Ќаписал microsin					</span>
					&nbsp;&nbsp;
				</td>
			</tr>
						<tr>
				<td colspan="2" class="createdate" valign="top">
					28.02.2010				</td>
			</tr>
					<tr>
			<td colspan="2" valign="top">
				<p>
«десь опубликован перевод на русский €зык уникального документа <b>USB in a NutShell</b>,
 облегчающего разработчикам всего мира первое знакомство с протоколом 
USB. Ќаилучша€ точка старта дл€ новичков, и неплохое средство прочистить
 мозги более опытным разработчикам (которым кажетс€, что они что-то 
знают). ≈сли какие-то термины и сокращени€ будут непон€тны, пользуйтесь 
разделом [<a href="http://microsin.ru/content/view/1109/44#Terms" target="_self">“ермины</a>] в конце статьи.
</p>


<p>
[<b>√лава 1: введение</b>]
</p>
<p>
Ќачало работы с протоколом <b>USB</b> выгл€дит устрашающе. Ќапример, одна только <a href="http://www.usb.org/developers/docs/usb_20.zip" target="_self">документаци€ стандарта USB 2.0</a> на 650 страниц может оттолкнуть любого новичка. » это только начало длинного списка св€занных стандартов дл€ USB. <a href="http://www.usb.org/developers/devclass/" target="_self">—тандарты классов USB</a>, как например <b>HID Class Specification</b>
 с общим описанием работы устройств (клавиатур, мышей, и т. д.), 
попадающих в класс HID (Human Interface Devices) Ц занимают еще 97 
страниц. ≈сли ¬ы разрабатываете USB хост, то нужно выбрать один из трех 
стандартов интерфейса хоста (<b>Host Controller Interface Standards</b>). Ќи один из них не детализирован в спецификации USB 2.0.
</p>
<p>
’орошие новости Ц нет необходимости читать весь стандарт USB. Ќекоторые 
главы вышли из стен маркетинга, другие посв€щены нижнему уровню, о 
котором заботитс€ ¬аша микросхема USB контроллера и хост вместе с 
разработчиками хаба. ƒавайте немного попутешествуем по различным главам 
спецификации USB 2.0, и кратко рассмотрим основные моменты.
</p>
<table style="border: 1px solid #000000" border="1" cellpadding="0" cellspacing="0">
	<tbody>
		<tr bordercolor="#000000" bgcolor="#0000ff">
			<td><b><span style="color: #ffffff">√лавы</span></b></td>
			<td><b><span style="color: #ffffff">Ќазвание</span></b></td>
			<td><b><span style="color: #ffffff">ќписание</span></b></td>
			<td><b><span style="color: #ffffff">—траниц</span></b></td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>1</td>
			<td>¬ведение</td>
			<td>¬ключает предназначение и область действи€ дл€ USB. —ама€ важна€ 
часть информации в этой части Ц ссылка на Universal Serial Bus Device 
Class Specifications. <b>Ќет необходимости читать эту главу</b>.</td>
			<td>2</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>2</td>
			<td>“ермины и аббревиатуры</td>
			<td>Ёто глава не требует по€снений Ц обычное зло любого стандарта.</td>
			<td>8</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>3</td>
			<td>ќсновные вопросы</td>
			<td>”казывает цели USB, такие как PlugТnТPlay и простота работы с ним конечного пользовател€ (<i>не разработчика</i>). ѕредставл€ет скорости Low, Full and High Speed со списком возможностей, полученных дл€ целей маркетинга. <b>Ќет необходимости читать эту главу</b>.</td>
			<td>4</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>4</td>
			<td>ќбзор архитектуры</td>
			<td>“ут можно начать чтение. Ёта часть предоставл€ет основной обзор 
системы USB включа€ топологию, скорости передачи данных, типы потоков 
данных, основные электрические параметры и т. д.</td>
			<td>10</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>5</td>
			<td>ћодель потока данных USB (Data Flow Model)</td>
			<td>Ёта глава начинает рассказ о том, как передаютс€ данные по 
”ниверсальной ѕоследовательной Ўине (Universal Serial Bus). “ут ввод€т и
 описывают такие термины как endpoints (конечные точки) пайпы или потоки
 (pipes). Ѕольша€ часть главы посв€щена каждому типу потока данных 
(Control, Interrupt, Isochronous и Bulk). ¬ажно знать каждый тип 
передачи и его свойства, хот€ это несколько т€жело дл€ новичка.</td>
			<td>60</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>6</td>
			<td>ћеханика</td>
			<td>√лава описывает два стандартных коннектора. «десь важна€ 
информаци€ Ц коннектор type A направлен на downstream (в сторону 
устройств USB) и коннектор type B направлен на upstream (в сторону хоста
 USB). “аким способом исключаетс€ возможность воткнуть кабель в два 
порта upstream. ¬се отсоедин€емые кабели должны быть full/high speed, в 
то врем€ как любой кабель low speed должен иметь подход€щую цоколевку. 
Ѕегло просмотрев коннекторы, ¬ы можете пропустить эту часть, если не 
собираетесь заниматьс€ производством коннекторов USB и/или кабелей. 
–азработчики PCB могут найти стандартные посадочные места (footprints) 
коннекторов.</td>
			<td>33</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>7</td>
			<td>Ёлектрика</td>
			<td>√лава рассматривает низкий уровень электрических сигналов, 
включа€ сопротивление линии, интервалы времени нарастани€/спада, 
спецификации драйвера (передатчика)/приемника и кодирование уровн€ бита,
 bit stuffing и т. д. Ќаиболее важные части этой главы описывают 
идентификацию скорости устройства путем подключени€ смещающего уровень 
резистора на одной из линий данных, а также сравнение bus powered 
devices и self powered devices. ћожете проскочить через эту главу, если 
¬ы не разрабатываете микросхемы приемопередатчиков USB. ’ороший даташит 
на устройства USB (микросхему) описывает величину терминирующих шину 
резисторов, которые ¬ам понадоб€тс€, чтобы соблюсти сопротивление шины.</td>
			<td>75</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>8</td>
			<td>—лой протокола</td>
			<td>“еперь мы начинаем рассматривать уровни протокола. Ёта глава 
описывает пакеты USB на уровне отдельных байт, включа€ пол€ sync, pid, 
address, endpoint, CRC. ѕосле этого происходит переход на следующий слой
 протоколов, USB пакеты. Ѕольшинство разработчиков не обращает внимани€ 
на эти низкоуровневые слои протокола, так как примен€емые ими микросхемы
 дл€ устройств USB сами забот€тс€ о них. ќднако здесь важны понимание 
процедуры получени€ информации о статусе (status reporting) и процедуры 
установлени€ св€зи (handshaking).</td>
			<td>45</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>9</td>
			<td>‘реймворк устройства USB</td>
			<td>Ёто наиболее часто используема€ глава во всей спецификации, и 
только одна из всех, которую € потрудилс€ распечатать и переплести. ќна 
описывает энумерацию шины и коды запросов (request codes - set address, 
get descriptor и т. п), наиболее используемый в программировании слой 
протоколов USB, важный дл€ программистов и дизайнеров. <b>Ёта глава должна быть тщательно прочитана</b>.</td>
			<td>36</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>10</td>
			<td>јппаратура и программное обеспечение хоста USB</td>
			<td>Ёта глава покрывает проблемы, касающиес€ хоста. ќписываютс€ 
генераци€ фреймов и микрофреймов, требовани€ к контроллеру хоста, 
программные механизмы и драйверна€ модельUSB. ћожете пропустить эту 
главу, если ¬ы не разрабатываете хост USB.</td>
			<td>23</td>
		</tr>
		<tr bordercolor="#000000" bgcolor="#ffff66">
			<td>11</td>
			<td>ќписание хаба</td>
			<td>ќписывает работу хабов USB включа€ конфигурацию хаба, разделение 
транзакций, стандартные дескрипторы дл€ класса хаба и т. п. ћожете 
пропустить эту главу, если ¬ы не разрабатываете хабы.</td>
			<td>143</td>
		</tr>
	</tbody>
</table>
<p>
“еперь можно начать читать те части стандарта, которые нам действительно
 нужны. ≈сли ¬ы разрабатываете драйвера (программное обеспечение) дл€ 
периферии USB, то ¬ам понадоб€тс€ только следующие части:
</p>
<ul>
	<li>4 - ќбзор архитектуры</li>
	<li>5 - ћодель потока данных USB (Data Flow Model)</li>
	<li>9 - ‘реймворк устройства USB</li>
	<li>10 - јппаратура и программное обеспечение хоста USB.</li>
</ul>
<p>
–азработчикам железа периферии (электроника) понадоб€тс€ только следующие главы:
</p>
<ul>
	<li>4 - ќбзор архитектуры</li>
	<li>5 - ћодель потока данных USB (Data Flow Model)</li>
	<li>6 - ћеханика</li>
	<li>7 - Ёлектрика.</li>
</ul>
<p>
<span style="color: #339966"><b>USB in a NutShell дл€ дизайнеров периферии</b></span>
</p>
<p>
“еперь допустим (и это наверн€ка правда) что (1) большинство из нас 
разрабатывают периферию USB и (2) прочитали стандарт, но после этого в 
голове никаких идей по поводу того, как все-таки реализовать 
разрабатываемое устройство. ¬ следующих 7 главах мы сфокусируемс€ на 
необходимых в разработке устройства USB част€х стандарта. Ёто позволит 
¬ам Ђвоткнутьс€ї в USB и производить дальнейшие разработки в 
соответствии с ¬ашим приложением (назначением устройства USB).
</p>
<p>
—тандарт USB 1.1 был недостаточно сложен дл€ High Speed, и перерос в USB
 2.0. „тобы упростить понимание фундаментальных принципов USB, мы 
пропустим многое, касающеес€ непосредственно устройств USB High Speed.
</p>
<p>
<span style="color: #339966"><b>¬ведение в Universal Serial Bus (USB)</b> </span>
</p>
<p>
USB версии 1.1 поддерживает две скорости Ц режим <b>full speed</b> 12 Mbits/s и режим <b>low speed</b>
 1.5 Mbits/s. –ежим 1.5 Mbits/s медленнее, и менее чувствителен к EMI 
(помехам), чем уменьшает стоимость ферритовых колец и снижает требовани€
 к качеству компонентов. Ќапример, кварцы могут быть заменены на дешевые
 резонаторы. USB 2.0, который в насто€щее врем€ господствует дл€ 
десктопов и ноутбуков, поднимает планку до 480Mbits/s. Ёти 480Mbits/s 
обозначены как режим <b>High Speed</b>, и по этому параметру он может конкурировать с последовательной шиной <b>Firewire</b>.
</p>
<p>
<span style="color: #339966"><b>—корости USB</b></span>
</p>
<ul>
	<li>High Speed - 480Mbits/s</li>
	<li>Full Speed - 12Mbits/s</li>
	<li>Low Speed - 1.5Mbits/s</li>
</ul>
<p>
Universal Serial Bus Ц шина, управл€ема€ исключительно хостом. Ќа шине 
допустим один и только один хост. —пецификаци€ USB сама по себе не 
поддерживает любую форму мультихостинга. ќднако в спецификации <a href="http://www.beyondlogic.org/usb/otghost.htm">On-The-Go</a>,
 по€вившейс€ в стандарте USB 2.0, введен протокол Host Negotiation 
Protocol, который позвол€ет двум устройствам USB договоритьс€, кто будет
 выполн€ть роль хоста. Ёто предназначено и ограничено одиночными 
подключени€ми точка-точка, например мобильный телефон Ц персональный 
органайзер, и не распростран€етс€ на хабы и конфигурации компьютеров. 
’ост USB ответственен за то, что предприн€л все транзакции и выбрал 
полосу пропускани€. ƒанные могут быть посланы методами различных 
транзакций, использу€ token-based протокол (протокол, основанный на 
символах).
</p>
<p>
ѕо моему мнению, шинна€ топологи€ USB несколько ограниченна€. ќдной из 
начальных целей USB было уменьшение количества кабелей, воткнутых в 
заднюю (или переднюю) стенку ¬ашего PC. ѕриверженцы Apple могут сказать,
 что эта иде€ пришла от Apple Desktop Bus, где клавиатура, мышь и друга€
 перифери€ могут соедин€тьс€ друг с другом (по топологии daisy chain), с
 использованием одного кабел€.
</p>
<p>
ќднако USB использует топологию Ђtiered starї (много€русна€ звезда), 
похожую на топологию 10BaseT Ethernet. Ёто предполагает возможное 
использование хабов, что добавл€ет неудобства Ц больше коробочек на 
¬ашем столе и большее количество кабелей. Ќо это не так плохо, как может
 показатьс€ поначалу. ћногие устройства имеют интегрированные в себ€ 
хабы. Ќапример, ¬аша клавиатура может содержать хаб, подключенный к 
компьютеру. ¬аша мышь и другие устройства (цифрова€ камера и т. п.) 
могут быть просто воткнуты в клавиатуру. ћногие мониторы также имеют 
встроенный хаб.
</p>
<p>
“опологи€ tiered star имеет некоторые преимущества перед простой 
топологией daisy chain. ѕервое Ц потребл€ема€ мощность каждого 
устройства может отслеживатьс€, и переключени€, перегрузки не вли€ют на 
работоспособность других устройств USB. ¬се high, full и low speed 
устройства могут поддерживатьс€ одновременно Ц хаб отфильтровывает 
транзакции high speed и full speed, таким образом устройства с низкими 
скорост€ми не получают данные со слишком высокой скоростью.
</p>
<p>
ќдновременно к одной шине USB может быть подключено до 127 устройств. 
Ќужно больше устройств? Ц просто добавьте другой порт/хост. ћногие 
старые хосты USB имели 2 порта, и многие производители сочли это 
недостаточным, и начали производство 4 и 5 портовых карт хоста и 
материнских плат, с внутренними портами USB (например, дл€ жестких 
дисков). –анние хосты имели один контроллер USB, и два порта раздел€ли 
между собой доступную полосу пропускани€ USB. ѕоскольку требовани€ к 
полосе пропускани€ росли, мы теперь видим многопортовые платы с двум€ 
или больше контроллерами, позвол€ющими организовать отдельные каналы дл€
 данных.
</p>
<p>
 онтроллеры хоста USB имеют собственные спецификации. ¬ стандарте USB 1.1 имеетс€ две спецификации Host Controller Interface:
</p>
<ul>
	<li><a href="http://www.intel.com/technology/usb/spec.htm" target="_self">UHCI (Universal Host Controller Interface)</a>
 Ц спецификаци€, разработанна€ Intel, котора€ перекладывает большинство 
функций на программное обеспечение (Microsoft) и позвол€ет применить 
дешевую аппаратуру.</li>
	<li><a href="http://www.compaq.com/productinfo/development/openhci.html">OHCI (Open Host Controller Interface)</a>
 Ц спецификаци€, разработанна€ Compaq, Microsoft и National 
Semiconductor, где больше функций возложено на аппаратуру (Intel), что 
упрощает программное обеспечение. “ипичное взаимодействие инженеров 
железа / программ. . .</li>
</ul>
<p>
— по€влением USB 2.0 понадобилась нова€ спецификаци€ Host Controller 
Interface Specification дл€ описани€ деталей регистрового уровн€, 
специфичного дл€ USB 2.0. –одилс€ <a href="http://developer.intel.com/technology/usb/ehcispec.htm">EHCI (Enhanced Host Controller Interface)</a>.
 »звестные поставщики включа€ Intel, Compaq, NEC, Lucent и Microsoft 
объединились вместе, чтобы предоставить нам один стандарт интерфейса, и 
таким образом, только один новый драйвер дл€ реализации в операционных 
системах. ¬оврем€.
</p>
<p>
USB носит им€, подразумевающее последовательную шину. ќна использует 4 
экранированных провода, из которых два передают питание (+5v &amp; GND).
 ќстальные два представл€ют витую пару (twisted pair) дифференциальных 
сигналов данных. »спользуетс€ схема кодировани€ <b>NRZI</b> (Non Return 
to Zero Invert, без возврата к нулю с инверсией) дл€ передачи данных с 
полем синхронизации дл€ синхронизировани€ тактов хоста и приемника.
</p>
<p>
USB поддерживает Ђгор€чееї (plugТnТplay) соединение с динамически 
загружаемыми и выгружаемыми драйверами. ѕользователь просто втыкает 
устройство, подключа€ его тем самым к шине. ’ост детектирует 
присоединение, опрашивает свежевставленное устройство и загружает 
подход€щий драйвер, индициру€ песочными часами на экране момент загрузки
 (если драйвер дл€ устройства USB уже установлен в системе).  онечный 
пользователь не заботитс€ ни о терминировании, ни об <b>IRQ</b> 
(прерывани€х) и адресах портов, ни о перезагрузке компьютера 
(перезагрузка не требуетс€).  огда пользователь закончил работу с 
USB-устройством, он просто вынимает его (или отсоедин€ет кабель), хост 
обнаружит отсутствие устройства и автоматически выгрузит драйвер.
</p>
<p>
«агрузка (выбор) подход€щего драйвера осуществл€етс€ по комбинации 
PID/VID (Product ID/Vendor ID). VID предоставл€етс€ организацией USB 
Implementor's forum за деньги, и это еще одна точка преткновени€ дл€ 
USB. ѕоследн€€ информаци€ о ценах может быть найдена на сайте <a href="http://www.usb.org/developers/vendor/" target="_self">http://www.usb.org/developers/vendor/</a>.
</p>
<p>
ƒругие организации по стандартам предоставл€ют дополнительные VID дл€ 
некоммерческого использовани€, такого как обучение, разработка и прочее 
(радиолюбительство). USB Implementors forum все-таки должен оказать эту 
услугу. ¬ этих случа€х ¬ы можете использовать VID, назначенный 
поставщику системы разработки. Ќапример, большинство производителей 
чипов имеют комбинации <b>VID</b>/<b>PID</b>, которые ¬ы можете 
использовать дл€ ¬аших чипов, и будет известно, что эти VID/PID не 
существуют в коммерческих устройствах. ƒругие производители чипов могут 
даже продать ¬ам дл€ ¬ашего коммерческого устройства личный PID, чтобы 
использовать его с VID производител€.
</p>
<p>
ƒруга€ более достойна€ внимани€ особенность USB - его режимы передачи. USB поддерживает <b>Control</b>, <b>Interrupt</b>, <b>Bulk</b> и <b>Isochronous</b>
 передачи. ¬ то врем€ как мы будем смотреть на другие режимы передачи 
позже, »зохронный режим позвол€ет устройству резервировать определеную 
часть от полосы пропускани€ с гарантируемым временем ожидани€ (latency).
 Ёто идеально дл€ аудио и видео приложений, где перегрузка канала может 
привести к заметной потере данных или понижению частоты кадров.  аждый 
режим передачи предоставл€ет разработчику компромиссы в области 
детектировани€ ошибок и восстановлени€, гарантированного времени 
ожидани€ и полосы пропускани€.
</p>
<p>
<a id="hardwareid" name="hardware" title="hardware"></a>[<b>√лава 2: ∆елезо</b>]
</p>
<p>
<span style="color: #339966"><b> оннекторы</b></span>
</p>
<p>
¬се устройства имеют <b>upstream</b>-соединение к хосту, и все хосты имеют <b>downstream</b>-соединение
 к устройству.  оннекторы upstream и downstream механически не 
взаимозамен€емы, что устран€ет недопустимые петлевые соединени€ на 
хабах, такие как подсоединение downstream-порта в downstream-порт. 
ќбычно используют два вида соединителей, называемые type A и type B, 
которые показаны ниже.
</p>
<table border="0">
	<tbody>
		<tr>
			<td>
			<div style="text-align: center">
			<img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-contypea.gif" class="jce_tooltip" style="margin: 5px; width: 109px; height: 45px" title="Type A USB Connector (сокет, нумераци€ контактов при виде снаружи)" alt="USBinNutShell-contypea.gif" height="45" width="109">
			</div>
			</td>
			<td></td>
			<td>
			<div style="text-align: center">
			<img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-contypeb.gif" class="jce_tooltip" style="margin: 5px; width: 54px; height: 53px" title="Type B USB Connector (сокет, нумераци€ контактов при виде снаружи)" alt="USBinNutShell-contypeb.gif" height="53" width="54">
			</div>
			</td>
		</tr>
		<tr>
			<td align="center">Type A USB Connector <br>
			(сокет, нумераци€ контактов <br>
			при виде снаружи)</td>
			<td></td>
			<td align="center">Type B USB Connector <br>
			(сокет, нумераци€ контактов <br>
			при виде снаружи)</td>
		</tr>
	</tbody>
</table>
<p>
Type A plug (т. е. папа) всегда обращен к upstream (т. е. к хосту). Type
 A socket (т. е мама) обычно можно найти на стенке хоста и хаба. 
Ќапример, сокеты type A расположены на компьютерных материнских платах и
 хабах. Type B plug всегда соедин€ютс€ с downstream и, следовательно, 
type B socket расположены на USB устройствах. Ќа первый взгл€д звучит 
довольно путано, но разобратьс€ можно =).
</p>
<p>
»нтересно обнаружить в некоторых компьютерных магазинах кабели type A 
&lt;--&gt; type A с пр€мой разводкой проводов и многочисленные зар€дники
 USB-типа. Ёто входит в противоречие со спецификацией USB. ”стройства, 
€вл€ющиес€ переходником между штеккером type A в штеккер type A €вл€ютс€
 мостом, используемым дл€ соединени€ двух компьютеров друг с другом. 
ƒругие запрещенные кабели Ц удлинители USB, имеющие на одном конце 
штеккер (либо type A, либо type B) и сокет на другом конце (либо type A,
 либо type B). Ёти кабели нарушают требовани€ к длине кабелей USB.<!------><!------><!------><!------><!------><!------><!------>
</p>
<p>
USB 2.0 включает в себ€ errata, которое представл€ет коннекторы mini-usb
 B. ѕодробна€ информаци€ по этим коннекторам может быть найдена в <a href="http://www.usb.org/developers/data/ecn1.pdf">Mini-B Connector Engineering Change Notice</a>.
 ѕричина по€влени€ коннекторов mini по€вилась дл€ применени€ USB в 
малогабаритных электронных устройствах типа мобильный телефоны и 
органайзеры. ќбычный коннектор type B слишком большой, чтобы его можно 
было просто применить в этих устройствах.
</p>
<p>
—овсем недавно была разработана спецификаци€ <a href="http://www.beyondlogic.org/usb/otghost.htm">On-The-Go</a>,
 котора€ добавл€ет дл€ USB функциональность peer-to-peer. ќна 
представл€ет хосты USB в мобильных телефонах и электронных органайзерах,
 и таким образом включена спецификаци€ дл€ mini-A джеков, mini-A 
разъемов и mini-AB разъемов. я предполагаю, что скоро получат широкое 
распространение кабели mini USB, и также набор кабелей-конвертеров mini в
 standard.
</p>
<table style="border-width: 1px; width: 396px" border="1" cellpadding="0" cellspacing="1">
	<tbody>
		<tr bgcolor="#0000ff">
			<td valign="top" width="33%"><span style="color: #ffffff"><b>Ќомер контакта</b></span></td>
			<td valign="top" width="33%"><span style="color: #ffffff"><b>÷вет провода</b></span></td>
			<td valign="top" width="33%"><span style="color: #ffffff"><b>‘ункци€</b></span></td>
		</tr>
		<tr bgcolor="#ffff66">
			<td valign="top" width="33%">1</td>
			<td valign="top" width="33%"> расный</td>
			<td valign="top" width="33%">VBUS (5 вольт)</td>
		</tr>
		<tr bgcolor="#ffff66">
			<td valign="top" width="33%">2</td>
			<td valign="top" width="33%">Ѕелый</td>
			<td valign="top" width="33%">D-</td>
		</tr>
		<tr bgcolor="#ffff66">
			<td valign="top" width="33%">3</td>
			<td valign="top" width="33%">«еленый</td>
			<td valign="top" width="33%">D+</td>
		</tr>
		<tr bgcolor="#ffff66">
			<td valign="top" width="33%">4</td>
			<td valign="top" width="33%">„ерный</td>
			<td valign="top" width="33%">«емл€</td>
		</tr>
	</tbody>
</table>
<p>
¬ кабел€х USB используетс€ стандартна€ цветова€ маркировка дл€ изол€ции 
внутренних проводников, что упрощает идентификацию проводов от 
производител€ к производителю. —тандарт регламентирует различные 
электрические параметры дл€ кабелей. »нтересно подробно прочитать 
включенные оригинальные спецификации USB 1.0. ¬ы бы разобрались в 
указанных электрических атрибутах, но параграф 6.3.1.2 предлагает 
рекомендованный цвет дл€ заполнени€ кабелей USB морозный белый Ц как 
скучно! USB 1.1 и USB 2.0 послабл€ют рекомендации на „ерный, —ерый или 
Ќатуральный.
</p>
<p>
–азработчики PCB в части 6 стандарта найдут стандартные посадочные места и цоколевки коннекторов.
</p>
<p>
<span style="color: #339966"><b>Ёлектрическа€ спецификаци€ </b></span>
</p>
<p>
¬ам не нужны электрические спецификации главы 7, за исключением если ¬ы 
не разрабатываете чипы USB устройств/трансиверов или USB хост/хаб. ћы 
бегло рассмотрим основные вопросы этой главы.
</p>
<p>
 ак мы уже упоминали, USB использует дл€ передачи данных пару проводов. 
ƒл€ кодировани€ примен€етс€ принцип NRZI (Not Return Zero Invert Ц без 
возврата к нулю с инверсией), и примен€етс€ вставка бит (bit stuffing), 
чтобы обеспечить нужные изменени€ уровн€ в потоке данных. Ќа 
низкоскоростных (low speed) и полноскоростных (full speed) устройствах 
дифференциальна€ С1Т передаетс€ путем повышени€ уровн€ D+ свыше +2.8V 
резистором 15 ќм, подключенным к +3.6V и D- ниже +0.3V резистором 
1.5 ќм, подключенным к земле. ƒифференциальный С0Т передаетс€ тем же 
способом, только уровни мен€ютс€ на противоположные - D- свыше 2.8V и D+
 ниже 0.3V. <br>
ѕриемник распознает дифференциальную С1Т, если уровень D+ больше на 
200mV, чем D-, и дифференциальный С0Т, если D+ на 200mV меньше, чем D-. 
ѕол€рность сигнала инвертируетс€ в зависимости от скорости шины. “ермины
 состо€ний СJТ и СKТ используютс€ дл€ обозначени€ логических уровней. Ќа
 low speed состо€ние СJТ Ц дифференциальный 0. Ќа high speed состо€ние 
СJТ Ц дифференциальный 1.
</p>
<p>
“рансиверы USB имеют одновременно дифференциальные и несимметричные 
одиночные (single ended) выходы. ќпределенные состо€ни€ шины обозначены 
несимметричными сигналами на D +, D- или обоими сразу. Ќапример, сигнал 
SE0 несимметричный и может использоватьс€ дл€ обозначени€ сброса 
устройства, если он удерживаетс€ дольше 10 мс. —игнал SE0 генерируетс€ 
путем удержани€ и D- и D+ в низком уровне (&lt; 0.3V). ќ реализации 
несимметричных и дифференциальных выходов важно знать, если ¬ы 
используете трансивер и FPGA в качестве устройства USB. ¬ы не можете 
осуществить работу только с помощью дифференциального выхода.
</p>
<p>
Ўина low speed/full speed имеет волновое сопротивление (characteristic 
impedance) 90 ќм +/- 15%. “аким образом, важно просмотреть даташит при 
выборе сопротивлений последовательных резисторов дл€ D+ иD-. ¬ любом 
хорошем даташите указаны величины сопротивлений и допуски на них.
</p>
<p>
–ежим High Speed (480Mbits/s) использует посто€нный ток 17.78 mA дл€ передачи сигналов Ц с целью уменьшени€ шума.
</p>
<p>
<span style="color: #339966"><b>»дентификаци€ скорости</b></span><a name="SpeedIdentification" title="SpeedIdentification"></a>
</p>
<p>
”стройство USB должно показать свою скорость путем подвешивани€ линии D+
 или D- к напр€жению 3.3V. ”стройство full speed, как показано на 
картинке ниже, использует pull up резистор, подключенный к D+ дл€ 
указани€ хосту, что это устройство full speed device. –езисторы pull up 
на стороне устройства используютс€ хостом или хабом дл€ определени€ 
присутстви€ устройства на шине (подключено ли устройство в порт USB). 
Ѕез pull up резистора считаетс€, что к шине USB ничего не подключено. 
Ќекоторые устройства имеют этот резистор встроенным в чип (он может 
включатьс€ и выключатьс€ программно под управлением firmware), другие 
требуют наличи€ внешнего резистора. <br>
¬озьмем дл€ примера технологию SoftConnectTM Philips Semiconductor. ѕри 
подключении к шине микроконтроллер инициализирует функцию устройства USB
 перед тем, как он разрешает pull up резистор дл€ идентификации 
скорости, показывающий, что устройство подключено к шине. ≈сли pull up 
резистор был подключен к Vbus, то это означает, что устройство сразу 
подключаетс€ к шине, как только оно воткнуто в порт USB. ¬ этом случае 
хост может попытатьс€ сбросить устройство и запросить дескриптор, когда 
микроконтроллер устройства еще не проинициализировал функцию устройства 
USB (не готов в обработке запросов USB).
</p>
<p>
ƒругие вендоры, такие как Cypress Semiconductor, также используют 
программируемый резистор дл€ технологии Re-NumerationTM в своих 
устройствах EzUSB, где устройство при подключении сначала определ€етс€ 
как программируемое устройство USB, а потом, после загрузки в устройство
 программного обеспечени€, отключаетс€ от шины и под управлением 
загруженного firmware проходит энумерацию как другое устройство USB (все
 это происходит незаметно дл€ пользовател€). ћногие устройства EzUSB не 
имеют встроенной пам€ти Flash или OTP ROM дл€ сохранени€ кода. ќни 
загружают код через подключение по USB.
</p>
<table border="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-fspullup.gif" class="jce_tooltip" style="margin: 5px; width: 466px; height: 308px" title="–исунок 2: USB устройство Full Speed имеет pull up резистор, подключенный к D+" alt="USBinNutShell-fspullup.gif" align="bottom" height="308" width="466"></td>
		</tr>
		<tr align="center">
			<td>–исунок 2: USB устройство Full Speed имеет pull up резистор, <br>
			подключенный к D+</td>
		</tr>
	</tbody>
</table>
<p>
&nbsp;
</p>
<table border="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-lspullup.gif" class="jce_tooltip" style="margin: 5px; width: 453px; height: 318px" title="–исунок 3: USB устройство Low Speed имеет pull up резистор, подключенный к D-" alt="USBinNutShell-lspullup.gif" align="bottom" height="318" width="453"></td>
		</tr>
		<tr align="center">
			<td>–исунок 3: USB устройство Low Speed имеет pull up резистор, <br>
			подключенный к D-</td>
		</tr>
	</tbody>
</table>
<p>
ќбратите внимание, что мы не рассматривали идентификацию скорости дл€ 
режима High Speed. High speed начинают работу путем подсоединени€ на 
full speed (1.5k на 3.3V к сигналу D+). ѕосле установлени€ соединени€ и 
сброса устройство переходит к соединению на high speed, если хаб или 
хост поддерживает это. ≈сли резистор работает в режиме high speed, 
резистор pull up отключаетс€ дл€ сохранени€ баланса линии.
</p>
<p>
ƒл€ совместимости устройства с USB 2.0 не требуетс€ поддержка режима 
high-speed. Ёто позвол€ет производить более дешевые устройства, если 
скорость не важна. Ёто также имеет место дл€ USB 1.1 low speed 
устройства, которое не об€зано поддерживать full speed.
</p>
<p>
ќднако высокоскоростное устройство не должно поддерживать режим низкой 
скорости. ќно должно только поддержать режим full speed дл€ первого 
соединени€, и затем перейти в режим high speed после успешного 
взаимодействи€. USB 2.0 совместимое downstream устройство (хаб или хост)
 должен поддерживать все три режима - high speed, full speed и low 
speed.
</p>
<p>
<span style="color: #339966"><b>ѕитание (VBUS)</b></span>
</p>
<p>
ќдна из выгод USB Ц устройства, питаемые от шины (bus-powered devices) Ц
 устройства, которые могут получать питание от шины и не требовать 
никаких дополнительных джеков или кабелей. ќднако многие путаютс€ в этой
 опции без рассмотрени€ нужных критериев.
</p>
<p>
USB устройство указывает свое энергопотребление в единицах 2mA в 
дескрипторе конфигурации, который мы будем детально рассматривать далее.
 ”стройство не может увеличить энергопотребление свыше величины, 
указанной при энумерации, даже если у него пропадет внешнее питание. 
»меетс€ 3 класса функций USB:
</p>
<ul type="disc">
	<li>Low-power питаемые от шины функции</li>
	<li>High-power питаемые от шины функции</li>
	<li>Self-powered функции (с собственным отдельным питанием)</li>
</ul>
<p>
Low power питаемые от шины функции получают питание полностью только от 
VBUS и не могут потребл€ть больше, чем 1 юнит нагрузки (one unit load). 
—пецификаци€ USB задает в качестве юнита нагрузки 100mA. Low power 
питаемые от шины функции должны быть также разработаны таким образом, 
чтобы могли работать при снижении напр€жени€ на VBUS до 4.40V и 
повышении до 5.25V, замеренных на upstream коннекторе устройства. ƒл€ 
большинства устройств 3.3V об€зательно применение LDO регул€торов.
</p>
<p>
High power питаемые от шины функции получают питание только от USB и не 
могут потребл€ть больше, чем 1 юнит нагрузки, пока они не будут 
сконфигурированы хостом, после чего они могут потребл€ть до 5 юнитов 
нагрузки (500mA Max), предоставленных в соответствии с запрошенной 
величиной из дескриптора. High power питаемые от шины функции должны 
быть способны проходить детектирование и энумерацию при напр€жении 
минимум 4.40V.  огда проходит работа с полной нагрузкой, то минимум дл€ 
VBUS составл€ет 4.75 V, и максимум 5.25V. «десь также измерени€ 
происход€т с разъема upstream.
</p>
<p>
—амопитаемые функции (self power functions) могут потребл€ть от шины до 1
 юнита нагрузки и получать остаток мощности от внешнего источника. ѕри 
пропадании внешнего источника питани€ должна быть обеспечена возможность
 потреблени€ от шины USB не больше, чем 1 юнит нагрузки. —амопитаемые 
функции проще в разработке, поскольку отсутствуют проблемы с 
потребл€емой мощностью. ќдноюнитова€ нагрузка на шину позвол€ет 
проводить детектирование и энумерацию без основного/дополнительного 
источника питани€.
</p>
<p>
Ќикакое устройство USB, независимо от типа питани€ не должно подавать 
питание на провод VBUS на своем upstream порту. ≈сли VBUS пропадет, 
устройство должно в течение 10 секунд убрать питание с D+/D- pull-up 
резисторов, используемых дл€ идентификации скорости.
</p>
<p>
ƒругое условие использовани€ VBUS - пусковой ток, который должен быть 
ограничен. Ёто выделено в параграфе 7.2.4.1 спецификации USB и обычно 
пропускаетс€. ѕусковой ток происходит из-за наличи€ электрической 
емкости в ¬ашем устройстве между VBUS и землей. ѕоэтому спецификаци€ 
указывает максимально допустимую разв€зывающую емкость, которую ¬ы 
можете иметь в своем устройстве - 10uF.  огда ¬ы отключаете устройство, 
возникает Ёƒ— самоиндукции от протекающего тока (за счет индуктивности 
кабел€ USB), котора€ может достичь большой величины. ƒл€ защиты от этого
 должна присутствовать минимальна€ разв€зывающа€ емкость 1uF на VBUS.
</p>
<p>
“ипичное питаемое от шины устройство не может потребл€ть ток свыше 
весьма разумной величины - 500mA. ¬ы можете спросить Ц какие осложнени€ 
тут могут быть? ћожет, Suspend Mode (режим приостановки)?
</p>
<p>
<span style="color: #339966"><b>ѕотребление в режиме приостановки (Suspend Mode)</b></span>
</p>
<p>
Suspend mode об€зателен дл€ всех устройств. ¬о врем€ приостановки 
вступают в силу дополнительные ограничени€. ћаксимальный ток 
приостановки пропорционален номинальной нагрузке в юнитах. ƒл€ 
устройства с током нагрузки в 1 юнит максимальный ток приостановки (по 
умолчанию) 500uA. Ёто включает ток от pull up резисторов на шине. ¬ хабе
 имеютс€ на обеих лини€х D- и D+ pull down резисторы по 15  ќм. Ёти pull
 down резисторы вместе с последовательно включенным резистором в 
устройстве (1.5  ќм pull up) создают общую нагрузку 16.5  ќм на VTERM 
обычно 3.3v. “аким образом, этот резистор потребл€ет 200uA еще до 
старта.
</p>
<p>
 роме того, нужно принимать во внимание дл€ многих устройств регул€тор 
3.3V. ћногие устройства USB работают от 3.3V, например - PDIUSBD11. 
Ћинейные регул€торы обычно весьма неэффективны при средних статических 
электрических токах пор€дка 600uA, поэтому требуютс€ более эффективные 
и, таким образом, дорогие регул€торы. ¬ большинстве случаев ¬ы должны 
также уменьшить тактовую частоту микроконтроллера или совсем остановить 
тактовую частоту микроконтроллера, чтобы уложитьс€ в предел 500uA.
</p>
<p>
<span style="color: #c0c0c0">ѕримечание переводчика: многие разработчики
 firmware не утруждают себ€ обработкой режима Suspend. Ќапример, среди 
разработок, основанных на библиотеке V-USB, мне не попадались проекты с 
поддержкой режима Suspend. </span>
</p>
<p>
ћногие разработчики на форуме USB Implementor's Forum спрашивают Ц какие
 проблемы произойдут, если превысить лимит тока Suspend? —амо собой 
разумеетс€, что большинство хостов и хабов не могут обнаружить 
перегрузку такой величины, и следовательно ¬аше устройство может 
потребл€ть ток 5 мј и даже 10 мј и при этом нормально работать Ц но 
все-таки ¬ы при этом нарушаете требовани€ спецификации USB. ќднако при 
нормальном функционировании (не в режиме Suspend), если ¬ы пытаетесь 
превысить на 100mA ¬ашу определенную допустимую нагружку, то хаб или 
хост наверн€ка обнаружат это и отсоедин€т ¬аше устройство в интересах 
целостности шины. <br>
 онечно, этих вопросов проектировани€ можно избежать, если ¬ы хотите 
спроектировать устройство USB с собственным питанием. “оки Suspend не 
имеют значени€ дл€ десктопов, но с введением спецификации On-The-Go 
хостами USB могут стать мобильные телефоны и мобильные органайзеры. 
Ћишнее потребление энергии ¬ашими USB устройствами произведет 
неблагопри€тный эффект на врем€ работы мобильного устройства от батареи.
</p>
<p>
<span style="color: #339966"><b>¬ход в Suspend Mode</b></span>
</p>
<p>
”стройство USB приостанавливаетс€ (переходит в режим Suspend), когда на 
шине нет активности более чем 3.0 мс. ¬ течение следующих 7 мс 
устройство должно отключитьс€, и не потребл€ть ток больше, чем заданный 
ток suspend. “аким образом, через 10 мс после прекращени€ активности 
шины ток потреблени€ от неЄ не должен превышать suspend current. ƒл€ 
поддержани€ состо€ни€ соединени€ к приостановленному хабу или хосту, 
устройство во врем€ режима Suspend должно все еще предоставл€ть питание 
на pull up нагрузочный резистор, определ€ющий выбор скорости.
</p>
<p>
” USB есть пакет start of frame (SOF), который строго периодично (каждые
 1 мс дл€ low speed и full speed) посылаетс€ на шину дл€ поддержани€ еЄ в
 активном состо€нии. Ёто преп€тствует тому, чтобы шина стала неактивной 
(вошла режим приостановки) при отсутствии данных на шине.
</p>
<ul type="disc">
	<li>Ўина high speed имеет микрофреймы, отсылаемые каждые 125.0 µs ±62.5 ns.</li>
	<li>Ўина full speed отправл€ет фрейм каждые 1.000 ms ±500 ns.</li>
	<li>Ўина low speed имеет keep alive EOP (End of Packet) каждые 1ms только в случае отсутстви€ любых low speed данных.</li>
</ul>
<p>
“ермин "Global Suspend" используетс€, когда вс€ шина USB входит в режим 
suspend целиком. ќднако также может быть приостановлено выбранное 
устройство путем посылки команды хабу, куда подключено устройство. Ёто 
называют как "Selective Suspend."
</p>
<p>
”стройство возобновит работу, как только примет любой Ђне idleї сигнал. 
≈сли устройство имеет возможность удаленного пробуждени€ (remote wakeup 
enabled), то оно может сигнализировать хосту о необходимости выхода из 
режима Suspend (resume).
</p>
<p>
<span style="color: #339966"><b>—корость сигнала данных (Data Signalling Rate)</b></span>
</p>
<p>
ƒруга€ область, котора€ часто пропускаетс€, €вл€етс€ допуск на такты 
USB. Ёта информаци€ имеетс€ в секции 7.1.11 спецификации USB.
</p>
<ul type="disc">
	<li>High speed data тактируютс€ 480.00Mb/s с допуском на скорость ± 500ppm.</li>
	<li>Full speed data тактируютс€ 12.000Mb/s с допуском на скорость ±0.25% или 2,500ppm.</li>
	<li>Low speed data тактируютс€ 1.50Mb/s с допуском на скорость ±1.5% или 15,000ppm.</li>
</ul>
<p>
Ёти допуски позвол€ют дл€ устройств low speed примен€ть недорогие 
резонаторы, но исключает их дл€ full speed или high speed устройств.
</p>
<p>
[<b>√лава 3: протоколы USB</b>]
</p>
<p>
¬ отличие от RS-232 и похожих последовательных интерфейсов, где формат 
отправл€емых данных не задан, USB составлен из нескольких слоев 
протоколов. «вучит сложно, но не опускайте руки.  ак только поймете, что
 происходит, нужно беспокоитьс€ только о протоколах верхних уровней. 
‘актически большинство контроллеров USB берет на себ€ заботу о нижних 
уровн€х протоколов, дела€ их невидимыми дл€ конечного разработчика.
</p>
<p>
 ажда€ транзакци€ USB состоит из:
</p>
<ul type="circle">
	<li>Token Packet (заголовок, показывающий Ц что должно передаватьс€ далее)</li>
	<li>необ€зательный Data Packet (содержит полезный payload)</li>
	<li>Status Packet (используетс€ дл€ подтверждени€ транзакций и предоставл€ет средство устранени€ ошибок)</li>
</ul>
<p>
 ак мы уже упоминали - USB €вл€етс€ шиной, где главным €вл€етс€ хост. 
’ост начинает все транзакции. ѕервый пакет, так называемый token, 
генерируетс€ хостом дл€ описани€ того, что проследует далее и будет ли 
это транзакци€ чтени€ или записи, и какой адрес устройства и 
определенна€ конечна€ точка (endpoint). —ледующий пакет обычно пакет 
данных, несущий полезную нагрузку, за которым идет пакет рукопожати€ 
(handshaking packet), сообщающий о том, что данные или token были 
прин€ты успешно, или конечна€ точка (endpoint) остановлена (stalled) или
 недоступна дл€ прин€ти€ данных.
</p>
<p>
<span style="color: #339966"><b>ќбщие пол€ пакета USB</b></span>
</p>
<p>
ƒанные на шине USB передаютс€ в таком пор€дке: первым идет LSB (Least 
Significant Bit, младший значащий бит). ѕакеты USB состо€т из следующих 
полей:
</p>
<ul type="circle">
	<li>Sync</li>
</ul>
<p>
¬се пакеты должны начинатьс€ с пол€ синхронизации (sync). ѕоле sync 
имеет длину 8 бит на low speed и full speed или 32 бита на high speed, и
 используетс€ дл€ синхронизации тактов приемника с тактами передатчика. 
ѕоследние 2 бита показывают, где начинаетс€ поле PID.
</p>
<ul type="circle">
	<li>PID</li>
</ul>
<p>
PID означает Packet ID. Ёто поле используетс€ дл€ обозначени€ типа 
пакета, который сейчас отправл€етс€. —ледующа€ таблица показывает 
возможные значени€ этого пол€.
</p>
<table style="border-width: 1px; width: 349px" border="1" cellpadding="0">
	<tbody>
		<tr bgcolor="#0000ff">
			<td valign="top" width="24%"><b><span style="color: #ffffff">√руппа</span></b></td>
			<td valign="top" width="24%"><b><span style="color: #ffffff">«начение PID</span></b></td>
			<td valign="top" width="51%"><b><span style="color: #ffffff">»дентификатор пакета </span></b></td>
		</tr>
		<tr bgcolor="#ffff66">
			<td rowspan="4" valign="top" width="24%">Token</td>
			<td valign="top" width="24%">0001</td>
			<td valign="top" width="51%">OUT Token</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1001</td>
			<td bgcolor="#ffff66" valign="top" width="51%">IN Token</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">0101</td>
			<td bgcolor="#ffff66" valign="top" width="51%">SOF Token</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1101</td>
			<td bgcolor="#ffff66" valign="top" width="51%">SETUP Token</td>
		</tr>
		<tr bgcolor="#ffff66">
			<td rowspan="4" valign="top" width="24%">Data</td>
			<td valign="top" width="24%">0011</td>
			<td valign="top" width="51%">DATA0</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1011</td>
			<td bgcolor="#ffff66" valign="top" width="51%">DATA1</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">0111</td>
			<td bgcolor="#ffff66" valign="top" width="51%">DATA2</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1111</td>
			<td bgcolor="#ffff66" valign="top" width="51%">MDATA</td>
		</tr>
		<tr bgcolor="#ffff66">
			<td rowspan="4" valign="top" width="24%">Handshake</td>
			<td valign="top" width="24%">0010</td>
			<td valign="top" width="51%">ACK Handshake</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1010</td>
			<td bgcolor="#ffff66" valign="top" width="51%">NAK Handshake</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1110</td>
			<td bgcolor="#ffff66" valign="top" width="51%">STALL Handshake</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">0110</td>
			<td bgcolor="#ffff66" valign="top" width="51%">NYET (No Response Yet)</td>
		</tr>
		<tr bgcolor="#ffff66">
			<td rowspan="4" valign="top" width="24%">Special</td>
			<td valign="top" width="24%">1100</td>
			<td valign="top" width="51%">PREamble</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1100</td>
			<td bgcolor="#ffff66" valign="top" width="51%">ERR</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">1000</td>
			<td bgcolor="#ffff66" valign="top" width="51%">Split</td>
		</tr>
		<tr>
			<td bgcolor="#ffff66" valign="top" width="24%">0100</td>
			<td bgcolor="#ffff66" valign="top" width="51%">Ping</td>
		</tr>
	</tbody>
</table>
<p>
” PID здесь 4 бита, однако чтобы обеспечить его правильный прием, 4 бита
 дополнены (complemented) и повторены, в результате получилс€ 8-битный 
PID. ѕолученный формат показан ниже:
</p>
<table style="border-width: 1px; width: 415px" border="1" cellpadding="0">
	<tbody>
		<tr bgcolor="#ffff66">
			<td align="center" valign="top" width="12%">PID0</td>
			<td align="center" valign="top" width="13%">PID1</td>
			<td align="center" valign="top" width="12%">PID2</td>
			<td align="center" valign="top" width="13%">PID3</td>
			<td align="center" valign="top" width="12%">nPID0</td>
			<td align="center" valign="top" width="12%">nPID1</td>
			<td align="center" valign="top" width="12%">nPID2</td>
			<td align="center" valign="top" width="12%">nPID3</td>
		</tr>
	</tbody>
</table>
<ul type="circle">
	<li>ADDR</li>
</ul>
<p>
ѕоле адреса указывает, какому из устройств USB предназначен пакет. јдрес
 имеет длину 7 бит, что позвол€ет адресовать до 127 поддерживаемых 
одновременно устройств. јдрес 0 недопустим, он предназначен дл€ 
устройств, адрес дл€ которых пока не назначен. Ћюбое устройство, 
которому не назначен адрес, должно отвечать на пакет с адресом 0.
</p>
<ul type="circle">
	<li>ENDP</li>
</ul>
<p>
ѕоле endpoint составлено из 4 бит, что позвол€ет 16 возможных конечных 
точек. ќднако устройства low speed могут иметь только 2 дополнительные 
конечные точки сверх заданного по умолчанию канала (4 конечных точки 
максимум).
</p>
<ul type="circle">
	<li>CRC</li>
</ul>
<p>
Cyclic Redundancy Checks (÷иклическа€ »збыточна€ проверка) выполн€етс€ 
над данными в пределах полезной нагрузки пакета. ¬се пакеты token имеют 5
 бит CRC, а пакеты data имеют 16 бит CRC.
</p>
<ul type="circle">
	<li>EOP</li>
</ul>
<p>
End of packet, конец пакета. —игнализируетс€ несимметричным нулем 
(Single Ended Zero, SE0) на врем€ примерно 2 бита, и далее следует 
состо€ние J длительностью 1 бит.
</p>
<p>
<span style="color: #339966"><b>“ипы пакетов USB</b></span>
</p>
<p>
USB имеет 4 разных типа пакета. ѕакеты token индицируют тип последующей 
транзакции, пакеты data содержат payload, пакеты handshake используютс€ 
дл€ подтверждени€ данных или сообщений об ошибках, и пакеты start of 
frame (SOF) показывают начало нового фрейма.
</p>
<ul type="circle">
	<li>пакеты Token</li>
</ul>
<p>
»меетс€ 3 типа пакетов token:
</p>
<p>
In Ц информируют устройство USB о том, что хост хочет прочитать информацию. <br>
Out - информируют устройство USB о том, что хост хочет отправить информацию. <br>
Setup Ц используетс€ дл€ начала управл€ющих передач (control transfers).
</p>
<p>
ѕакеты token должны удовлетвор€ть следующему формату:
</p>
<table style="border-width: 1px; width: 331px" border="1" cellpadding="0" cellspacing="3">
	<tbody>
		<tr bgcolor="#ffff66">
			<td width="18%">Sync</td>
			<td width="13%">PID</td>
			<td width="17%">ADDR</td>
			<td width="17%">ENDP</td>
			<td width="17%">CRC5</td>
			<td width="17%">EOP</td>
		</tr>
	</tbody>
</table>
<ul type="circle">
	<li>пакеты Data</li>
</ul>
<p>
»меетс€ 2 типа пакетов данных, каждый из которых может передать до 1024 байта данных.
</p>
<p>
Data0 <br>
Data1
</p>
<p>
–ежим High Speed задает два других data PID - DATA2 и MDATA.<br>
ѕакеты Data имеют следующий формат:
</p>
<table style="border-width: 1px; width: 331px" border="1" cellpadding="0">
	<tbody>
		<tr bgcolor="#ffff66">
			<td width="18%">Sync</td>
			<td width="13%">PID</td>
			<td width="35%">Data</td>
			<td width="17%">CRC16</td>
			<td width="17%">EOP</td>
		</tr>
	</tbody>
</table>
<p>
ћаксимальный размер полезной нагрузки (payload) дл€ low-speed устройств 
составл€ет 8 байт. ћаксимальный размер полезной нагрузки дл€ full-speed 
устройств составл€ет 1023 байт. ћаксимальный размер полезной нагрузки 
дл€ high-speed устройств составл€ет 1024 байт. ƒанные нужно послать в 
единицах байт.
</p>
<ul>
	<li>пакеты Handshake</li>
</ul>
<p>
»меетс€ 3 типа пакетов handshake, которые состо€т просто из PID
</p>
<p>
ACK Ц подтверждение о том, что пакет успешно прин€т. NAK Ц сообщение о 
том, что устройство временно не может отправить или прин€ть данные. 
“акже используетс€ в interrupt транзакци€х дл€ информировани€ хоста о 
том, что нет никаких данных дл€ передачи. STALL Ц устройство находитс€ в
 состо€нии, которое требует вмешательства со стороны хоста.
</p>
<p>
ѕакеты handshake имеют следующий формат:
</p>
<table style="border-width: 1px; width: 160px" border="1" cellpadding="0">
	<tbody>
		<tr bgcolor="#ffff66">
			<td valign="top" width="37%">Sync</td>
			<td valign="top" width="27%">PID</td>
			<td valign="top" width="35%">EOP</td>
		</tr>
	</tbody>
</table>
<ul type="circle">
	<li>пакеты Start of Frame (SOF)</li>
</ul>
<p>
ѕакет SOF состоит из 11-битного номера фрейма, отсылаемого хостом каждые
 1ms ± 500ns на full speed или каждые 125 µs ± 0.0625 µs на high speed.
</p>
<table style="border-width: 1px; width: 331px" border="1" cellpadding="0">
	<tbody>
		<tr bgcolor="#ffff66">
			<td width="18%">Sync</td>
			<td width="13%">PID</td>
			<td width="35%">Frame Number</td>
			<td width="17%">CRC5</td>
			<td width="17%">EOP</td>
		</tr>
	</tbody>
</table>
<p>
<span style="color: #339966"><b>‘ункции USB</b></span>
</p>
<p>
 огда мы представл€ем себе устройство USB, мы думаем о нем как о 
периферийном устройстве USB, но устройство USB могло означать USB 
трансивер, используемый в хосте или периферии, USB хаб или микросхему 
контроллера хоста, или периферийное устройство USB. ѕоэтому стандарт 
ссылаетс€ на функции USB, которые можно видеть как USB устройства, 
которые обеспечивают определенный функционал наподобие принтера, 
Zip-драйва, сканера, модема или другой периферии.
</p>
<p>
—ейчас мы уже должны знать р€д пон€тий, составл€ющих пакет USB. Ќет? ¬ы 
уже забыли, сколько бит входит в поле PID? Ќе будьте слишком обеспокоены
 этим.   счастью, большинство функций USB уже в кремнии (специальных 
чипах) получают обработку низких уровней протокола USB (до сло€ 
транзакций, который мы рассмотрим в следующей главе). ћы рассматриваем 
информацию о низких сло€х протокола USB потому, что большинство 
контроллеров функций USB сообщают об ошибках, таких как PID Encoding 
Error. Ќе рассмотрев бегло низкий уровень, можно было бы спросить, что 
означает PID Encoding Error? ≈сли бы ¬ы предположили, что последние 
четыре бита PID не соответствовали инверсии первых четырех битов, то ¬ы 
были бы правы.
</p>
<p>
<img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-endpoint.gif" class="jce_tooltip" style="margin: 5px; width: 593px; height: 365px" title="USBinNutShell-endpoint.gif" alt="USBinNutShell-endpoint.gif" align="bottom" height="365" width="593">
</p>
<p>
” большинства функций есть сери€ буферов, обычно 8 байт длиной.  аждый 
буфер будет принадлежать конечной точке (endpoint) - EP0 IN, EP0 OUT и 
т. п.. Ќапример, хост отправл€ет запрос дескриптора устройства (device 
descriptor request). ‘ункци€ аппаратно прочитает пакет setup и определит
 из пол€ адреса, предназначен ли пакет именно ей, и если да, то 
скопирует полезную нагрузку (payload) последующего пакета данных в 
соответствующий буфер конечной точки, заданный величиной в поле endpoint
 токена setup. “акже отправитс€ пакет handshake дл€ подтверждени€ приема
 байта и сгенерируетс€ внутреннее прерывание в микроконтроллере дл€ 
соответствующей конечной точки, обозначающее, что пакет был прин€т. ¬се 
это делаетс€ обычно в Ђжелезеї (аппаратуре чипа контроллера USB 
устройства).
</p>
<p>
ѕрограммное обеспечение (firmware микроконтроллера) получит прерывание, в
 котором оно должно прочитать содержимое буфера конечной точки и 
проанализировать запрос на дескриптор устройства (parse device 
descriptor request). <b></b>
</p>
<p>
<span style="color: #339966"><b> онечные точки (endpoints)</b></span>
</p>
<p>
 онечные точки могут быть описаны как источники или приемники данных. 
ѕоскольку шина €вл€етс€ хосториентированной, конечные точки оказываютс€ в
 конце канала св€зи, на функции USB. Ќапример, на уровне программного 
обеспечени€ ¬аш драйвер устройства может отправл€ть пакет в конечную 
точку EP1 устройства. “ак как данные поступают от хоста, они попадут в 
OUT буфер EP1. ¬аше firmware теперь может не спеша прочитать эти данные.
 ≈сли устройство хочет вернуть данные, функци€ не может просто записать 
их на шину, так как шина полностью управл€етс€ хостом. ѕоэтому firmware 
помещает данные в буфер EP1 IN, и эти данные наход€тс€ в буфере до тех 
пор, пока хост не отправит пакет IN, которым он запрашивает данные 
конечной точки.  онечные точки можно также рассматривать как интерфейс 
между железом функции устройства и firmware, работающем на функции 
устройства. <br>
¬се устройства должны поддерживать конечную точку 0. Ёто конечна€ точка,
 котора€ принимает все управл€ющие запросы и запросы статуса во врем€ 
энумерации и в течение всего времени, когда устройство остаетс€ 
работоспособным на шине.
</p>
<p>
<span style="color: #339966"><b>ѕотоки, или каналы (Pipes, дословно - трубы)</b></span>
</p>
<p>
 огда устройство отправл€ет и принимает данные через несколько конечных 
точек, клиентское программное обеспечение передает данные через потоки. 
ѕоток Ц логическое соединение между хостом и конечной точкой (точками). 
ѕотоки также имеют набор параметров Ц тип передачи (Control, Bulk, Iso 
или Interrupt), направление потока данных и максимальные размеры 
пакета/буфера. Ќапример, поток по умолчанию Ц двунаправленный поток, 
составленный из IN конечной точки 0 и OUT конечной точки 0 с типом 
передачи control. <br>
USB определ€ет два типа потоков (pipes)
</p>
<ul type="disc">
	<li><b>Stream Pipes</b> не имеют предопределенного USB формата, поэтому
 ¬ы можете послать данные любого типа через stream pipe и восстановить 
данные на другом конце. ѕотоки данных последовательны и имеют 
предопределенную направленность Ц IN или OUT. Stream pipes поддерживают 
типы передач bulk, isochronous и interrupt. Stream pipes могут 
управл€тьс€ либо от хоста, либо от устройства.</li>
	<li><b>Message Pipes</b> имеют предопределенный USB формат. ќни 
управл€ютс€ хостом, инициируютс€ запросом, отправл€емым от хоста. ƒанные
 пересылаютс€ в нужном направлении, заданном в запросе. “аким образом, 
message pipes позвол€ют передавать данные в обоих направлени€х, но 
поддерживают только передачи control.</li>
</ul>
<p>
[<b>√лава 4: “ипы конечных точек (Endpoint Types)</b>]
</p>
<p>
—тандарт USB определ€ет 4 типа конечных точек/передач:
</p>
<ul type="disc">
	<li><a href="http://microsin.ru/content/view/1107/44#Control" target="_self">Control</a></li>
	<li><a href="http://microsin.ru/content/view/1107/44#Interrupt" target="_self">Interrupt</a></li>
	<li><a href="http://microsin.ru/content/view/1107/44#Isochronous" target="_self">Isochronous</a></li>
	<li><b><b><a href="http://microsin.ru/content/view/1107/44#Bulk" target="_self">Bulk</a></b></b></li>
</ul>
<p>
<span style="color: #339966"><b>ѕередачи Control</b></span><a name="Control" title="Control"></a>
</p>
<p>
”правл€ющие передачи (control transfer) обычно используютс€ дл€ команд и
 операций получени€ состо€ни€. ќсновна€ настройка устройства USB со 
всеми функци€ми энумерации происходит с использованием передач control. 
Ёто обычно быстрые, случайные по времени пакеты, инициированные хостом, 
которые имеют наилучший приоритет по доставке (best effort). ћаксимально
 допустима€ длина полезной нагрузки (payload, или размер пакета) 
управл€ющей передачи полноскоростных (full-speed) устройств USB 
составл€ет 8, 16, 32 или 64 байта; дл€ высокоскоростных (high-speed) 
устройств этот размер составл€ет 64 байта, и дл€ низкоскоростных 
(low-speed) устройств это 8 байт (только 8 байт, и никаких других 
вариантов). <!-- 130212 —тарый вариант перевода: ƒлина пакета дл€ устройств low speed должна  быть 8 байт, дл€ high speed разрешены размеры пакета 8, 16, 32 или 64 байт, и устройства  full speed должны  иметь размер пакета 64 байта.-->
</p>
<p>
” передач control могут быть до 3 стадий.
</p>
<ul type="disc">
	<li>Setup Stage Ц стади€ установки, определ€ет, куда посылаютс€ данные.
 —остоит из трех пакетов. “окен setup отправл€етс€ первым, он содержит 
адрес и номер конечной точки. ѕакет данных (data packet) отправл€етс€ 
следующим, и всегда имеет тип PID data0 и включает <a href="http://microsin.ru/content/view/1108/44#SetupPacket" target="_self">setup packet</a>,
 который детализирует тип запроса. ћы позже подробно рассмотрим setup 
packet. ѕоследний пакет из трех Ц рукопожатие (handshake), используемое 
дл€ подтверждени€ успешности приема или дл€ сообщени€ об ошибке. ≈сли 
функци€ успешно прин€ла setup data (CRC, PID и т. п. в пор€дке), она 
отвечает рукопожатием (handshake) ACK, иначе игнорирует данные, не 
отправл€€ пакет handshake. ‘ункци€ не может послать пакетамы STALL или 
NAK в ответ на пакет setup.
	<div align="center">
	<table border="0" cellpadding="0">
		<tbody>
			<tr>
				<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-contset.gif" alt="USBinNutShell-contset.gif" title="USBinNutShell-contset.gif" style="border: 0px none #000000; width: 320px; height: 142px" align="bottom" border="0" height="142" width="320"></td>
				<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transkey.gif" alt="USBinNutShell-transkey.gif" title="USBinNutShell-transkey.gif" style="border: 0px none #000000; width: 125px; height: 27px" align="bottom" border="0" height="27" width="125"></td>
			</tr>
		</tbody>
	</table>
	</div>
	</li>
	<li>Data Stage Ц эта стади€ необ€зательна. ќна состоит из одной или 
нескольких передач IN или OUT. «апрос setup показывает, сколько данных 
будет передаватьс€ на этой стадии. ≈сли количество данных превышает 
максимальный размер пакета, данные будут переданы в нескольких 
передачах, кажда€ из которых (за исключением последней) имеет размер 
максимального пакета.</li>
</ul>
<p>
—тади€ data stage имеет два различных сценари€, в зависимости от направлени€ передачи данных.
</p>
<p>
<b>—ценарий IN</b>: когда хост готов прин€ть данные control data, он 
выпускает IN Token. ≈сли функци€ получает IN token с ошибкой, например 
PID не соответствует инверитрованным битам PID, то она игнорирует пакет.
 ≈сли токен прин€т успешно, устройство может либо ответить пакетом DATA,
 содержащим отправл€емые control data, либо stall packet, индицирующий 
ошибку конечной точки, либо пакет NAK, показывающий хосту, что конечна€ 
точка работает, но пока не имеет данных дл€ отправки.
</p>
<div align="center">
<table border="0" cellpadding="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-contdata.gif" alt="USBinNutShell-contdata.gif" title="USBinNutShell-contdata.gif" style="border: 0px none #000000; width: 315px; height: 322px" align="bottom" border="0" height="322" width="315"></td>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transkey.gif" alt="USBinNutShell-transkey.gif" title="USBinNutShell-transkey.gif" style="border: 0px none #000000; width: 125px; height: 27px" align="bottom" border="0" height="27" width="125"></td>
		</tr>
	</tbody>
</table>
</div>
<p>
<b>—ценарий OUT</b>: когда хосту нужно передать устройству пакет с 
управл€ющими данными (control data packet), он выпускает OUT token, за 
которым идет пакет, содержащий control data в качестве полезной 
нагрузки. ≈сли люба€ часть Ц или OUT token, или data packet ошибочны, 
функци€ игнорирует пакет. ≈сли буфер конечной точки пуст, она заполн€ет 
буфер данными и передает ACK, информирующий хост о том, что данные 
получены успешно. ≈сли буфер конечной точки не пуст, поскольку идет 
обработка предыдущего пакета, функци€ отвечает NAK. ќднако, если у 
оконечной точки была ошибка, и ее бит останова (halt bit) был 
установлен, она возвращает STALL.
</p>
<ul type="circle">
	<li>Status Stage сообщает состо€ние полного запроса, и мен€етс€ в 
зависимости от направлени€ передачи. ‘ункци€ всегда возвращает сообщение
 состо€ни€.</li>
</ul>
<p>
—тади€ status stage также имеет два различных сценари€, в зависимости от направлени€ передачи данных.
</p>
<p>
<b>—ценарий IN</b>: если хост отправил токен (токены) IN token(s) во 
врем€ стадии data stage дл€ приема данных, хост должен подтвердить 
успешный прием данных. Ёто делаетс€ путем отправки токена OUT, за 
которым идет пакет data нулевой длины. ‘ункци€ может теперь сообщить 
свой статус на стадии handshaking. ACK указывает на то, что функци€ 
завершила команду и готова к приему следующей команды. ≈сли во врем€ 
обработки этой команды произошла ошибка, функци€ выдает STALL. ќднако 
если пока продолжаетс€ обработка команды, функци€ выдает NAK, 
указывающий хосту повторить позже стадию status stage.
</p>
<div align="center">
<table border="0" cellpadding="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-contsta1.gif" style="border: 0px none #000000; width: 336px; height: 119px" alt="USBinNutShell-contsta1.gif" title="USBinNutShell-contsta1.gif" align="bottom" border="0" height="119" width="336"></td>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transkey.gif" alt="USBinNutShell-transkey.gif" title="USBinNutShell-transkey.gif" style="border: 0px none #000000; width: 125px; height: 27px" align="bottom" border="0" height="27" width="125"></td>
		</tr>
	</tbody>
</table>
</div>
<p>
<b>—ценарий OUT</b>: если хост отправил токен (токены) OUT на стадии 
data stage Ц чтобы отправить данные, функци€ подтверждает успешный прием
 данных отправкой пакета нулевой длины в ответ на токен IN. ќднако если 
произошла ошибка, функци€ должна выдать STALL, или если пока 
обрабатываютс€ данные, должна выдать NAK, указыва€ хосту повторить позже
 status phase.
</p>
<div align="center">
<table border="0" cellpadding="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-contsta2.gif" style="border: 0px none #000000; width: 342px; height: 121px" alt="USBinNutShell-contsta2.gif" title="USBinNutShell-contsta2.gif" align="bottom" border="0" height="121" width="342"></td>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transkey.gif" alt="USBinNutShell-transkey.gif" title="USBinNutShell-transkey.gif" style="border: 0px none #000000; width: 125px; height: 27px" align="bottom" border="0" height="27" width="125"></td>
		</tr>
	</tbody>
</table>
</div>
<p>
<span style="color: #339966"><b><b><b><b>ѕередачи Control: общий обзор</b></b></b></b></span>
</p>
<p>
“еперь, как все это совмещаетс€? Ќапример, хост хочет запросить 
дескриптор устройства во врем€ энумерации. ѕакеты, которые посылают, 
будут следующими.
</p>
<p>
’ост отправл€ет токен Setup, говор€щий функции, что следующий пакет 
будет пакет Setup. ѕоле адреса будет содержать адрес устройства, от 
которого главный компьютер просит дескриптор. Ќомер конечной точки 
должен быть 0, что указывает канал по умолчанию (default pipe). «атем 
хост отправит пакет DATA0. ќн будет содержать 8 байт полезной нагрузки, 
котора€ будет €вл€тьс€ запросом <a href="http://microsin.ru/content/view/1108/44#GetDescriptor" target="_self">Device Descriptor Request</a>,
 описанным в √лаве 9 спецификации USB. ‘ункци€ USB подтверждает пакет 
setup, что он был прочитан корректно, без ошибок. ≈сли пакет прин€т с 
ошибкой, устройство просто игнорирует этот пакет. ’ост должен отправить 
пакет позже заново, после короткой задержки.
</p>
<div align="center">
<table style="border-width: 1px; width: 90%" border="1" cellpadding="0">
	<tbody>
		<tr>
			<td width="20%"><br>
			1. “окен Setup</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">ADDR</td>
			<td bgcolor="#999999" width="9%">ENDP</td>
			<td bgcolor="#999999" width="9%">CRC5</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">јдрес и номер конечной точки</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">2. ѕакет Data0</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td colspan="2" bgcolor="#999999" width="17%">Data0</td>
			<td bgcolor="#999999" width="9%">CRC16</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">Device Descriptor Request</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">3. Ack Handshake</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td colspan="3" width="26%"></td>
			<td width="30%">”стройство подтверждает Setup Packet</td>
		</tr>
	</tbody>
</table>
</div>
<p>
“ри вышеуказанных пакета представл€ют из себ€ первую транзакцию USB. 
“еперь устройство USB будет декодировать 8 прин€тых байт, и определ€ть 
по ним, что это device descriptor request (запрос на дескриптор 
устройства). ѕосле этого устройство попытаетс€ отправить <a href="http://microsin.ru/content/view/1108/44#DeviceDescriptors">Device Descriptor</a>, что произойдет в следующей транзакции USB.
</p>
<div align="center">
<table style="border-width: 1px; width: 90%" border="1" cellpadding="0">
	<tbody>
		<tr>
			<td width="20%"><br>
			1. “окен In</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">ADDR</td>
			<td bgcolor="#999999" width="9%">ENDP</td>
			<td bgcolor="#999999" width="9%">CRC5</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">јдрес и номер конечной точки</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">2. ѕакет Data1</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td colspan="2" bgcolor="#999999" width="17%">Data1</td>
			<td bgcolor="#999999" width="9%">CRC16</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">ѕервые 8 байт дескриптора устройства</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">3. Ack Handshake</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td colspan="3" width="26%"></td>
			<td width="30%">’ост подтверждает пакет</td>
		</tr>
	</tbody>
</table>
</div>
<div align="center">
<table style="border-width: 1px; width: 90%" border="1" cellpadding="0">
	<tbody>
		<tr>
			<td width="20%">1. “окен In</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">ADDR</td>
			<td bgcolor="#999999" width="9%">ENDP</td>
			<td bgcolor="#999999" width="9%">CRC5</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">јдрес и номер конечной точки</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">2. ѕакет Data0</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td colspan="2" bgcolor="#999999" width="17%">Data0</td>
			<td bgcolor="#999999" width="9%">CRC16</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">ѕоследние 4 байта + Padding</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">3. Ack Handshake</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td colspan="3" width="26%"></td>
			<td width="30%">’ост подтверждает пакет</td>
		</tr>
	</tbody>
</table>
</div>
<p>
¬ этом случае мы подразумеваем, что максимальный размер полезной 
нагрузки 8 байт. ’ост отправл€ет токен IN, чем говорит устройству, что 
он может теперь отправить данные дл€ этой конечной точки. ѕоскольку 
максимальный размер пакета 8 байт, мы должны дл€ отправки разделить 12 
байт дескриптора устройства на кусочки.  аждый кусочек должен быть 
размером по 8 байт, за исключением последней транзакции. ’ост 
подтверждает каждый пакет, который мы посылаем ему.
</p>
<p>
 ак только дескриптор устройства отправлен, начинаетс€ транзакци€ 
статуса. ≈сли транзакции были успешны, хост отправл€ет пакет нулевой 
длины, показывающий, что полна€ транзакци€ была успешна. ‘ункци€ 
отвечает на это пакетом нулевой длины, индицирующим еЄ состо€ние 
(status).
</p>
<div align="center">
<table style="border-width: 1px; width: 90%" border="1" cellpadding="0">
	<tbody>
		<tr>
			<td width="20%"><br>
			1. “окен Out</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">ADDR</td>
			<td bgcolor="#999999" width="9%">ENDP</td>
			<td bgcolor="#999999" width="9%">CRC5</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">јдрес и номер конечной точки</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">2. ѕакет Data1</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td colspan="2" bgcolor="#999999" width="17%">Data1</td>
			<td bgcolor="#999999" width="9%">CRC16</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td width="30%">ѕакет нулевой длины</td>
		</tr>
		<tr>
			<td colspan="8"></td>
		</tr>
		<tr>
			<td width="20%">3. Ack Handshake</td>
			<td bgcolor="#999999" width="9%">Sync</td>
			<td bgcolor="#999999" width="7%">PID</td>
			<td bgcolor="#999999" width="9%">EOP</td>
			<td colspan="3" width="26%"></td>
			<td width="30%">”стройство подтверждает всю транзакцию целиком</td>
		</tr>
	</tbody>
</table>
</div>
<p>
<span style="color: #339966"><b>ѕередачи Interrupt</b></span><a name="Interrupt" title="Interrupt"></a>
</p>
<p>
Ћюбой, кто имел дело с запросами на прерывание у микроконтроллеров, 
знает, что прерывани€ генерируютс€ устройством (в микроконтроллере). 
ќднако под управлением USB, если устройство требует внимани€ хоста, оно 
должно ждать, пока хост его не опросит, чтобы пон€ть, что устройство 
нуждаетс€ в срочном обмене данными! ѕередачи Interrupt имеют следующие 
особенности:
</p>
<ul type="square">
	<li>√арантированна€ латентность (latency)</li>
	<li>ќднонаправленный поток канала</li>
	<li>ќпределение ошибок и последующа€ повторна€ попытка передачи.</li>
</ul>
<p>
ѕередачи Interrupt обычно непериодические, когда USB устройство 
"инициирует" св€зь, требующую ограниченного времени ожидани€. «апрос на 
Ђпрерываниеї ставитс€ устройством USB в очередь, пока компьютер не 
опросит устройство USB с целью получени€ данных.
</p>
<p>
ћаксимальна€ полезна€ нагрузка дл€ low-speed устройств - 8 байт. <br>
ћаксимальна€ полезна€ нагрузка дл€ full-speed устройств - 64 байта. <br>
ћаксимальна€ полезна€ нагрузка дл€ high-speed устройств - 1024 байта.
</p>
<div align="center">
<table style="width: 80%" border="0" cellpadding="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transint.gif" alt="USBinNutShell-transint.gif" title="USBinNutShell-transint.gif" style="width: 366px; height: 322px" align="bottom" height="322" width="366"></td>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transkey.gif" alt="USBinNutShell-transkey.gif" title="USBinNutShell-transkey.gif" style="width: 125px; height: 27px" align="bottom" height="27" width="125"></td>
		</tr>
	</tbody>
</table>
</div>
<p>
Ќа диаграмме показан формат транзакций Interrupt IN и Interrupt OUT.
</p>
<p>
<b>Interrupt IN</b>: хост периодически опрашивает конечную точку interrupt. —корость опроса указана в описателе конечной точки (<a href="http://microsin.ru/content/view/1108/44#EndpointDescriptors">endpoint descriptor</a>),
 который мы рассмотрим позже.  аждый опрос сопровождаетс€ отправкой 
хостом токена IN. ≈сли токен IN испорчен, функци€ игнорирует пакет, и 
продолжает мониторинг шины в ожидании новых токенов.
</p>
<p>
≈сли interrupt поставлено в очередь устройством USB, функци€ отправит 
пакет data, содержащий данные, соответствующие interrupt при приеме 
токена IN. ѕосле успешного приема хостом, хост возвратит ACK. ќднако, 
если данные были испорчены, хост не вернет status. ”словие прерывани€ не
 присутствовало, когда главный компьютер опросил оконечную точку 
прерывани€ токеном IN, но функци€ ответила о своем состо€нии NAK. ≈сли 
на этой конечной точке произошла ошибка, то в ответ на токен IN будет 
отправлен STALL.
</p>
<p>
<b>Interrupt OUT</b>: когда хост хочет отправить устройству данные 
interrupt, он выдает токен OUT, за которым идет пакет data, содержащий 
данные interrupt. ≈сли люба€ часть - токен OUT или пакет data ошибочны, 
функци€ игнорирует пакет. ≈сли буфер конечной точки функции был пуст, и 
функци€ вывела данные в буфер конечной точки, она выдает ACK, информиру€
 хост об успешно прин€тых данных. ≈сли буфер конечной точки не пуст (еще
 идет обработка предыдущего пакета), то функци€ выдает NAK. ќднако, если
 ошибка произошла с конечной точкой и ее бит останова был установлен, то
 функци€ выдает STALL.
</p>
<p>
<span style="color: #339966"><b>»зохронные передачи (Isochronous Transfers)</b></span><a name="Isochronous" title="Isochronous"></a>
</p>
<p>
»зохронные передачи происход€т периодически и продолжительное врем€. ќни
 обычно содержат информацию, прив€занную ко времени (чувствительную к 
времени доставки), например аудио или видео потоки. ≈сли произойдет 
задержка или повторна€ передача данных в аудио потоке, то ¬ы должны в 
результате получить искаженный звук. ƒополнительна€ непри€тность Ц может
 пропасть синхронизаци€ звука. ќднако выпадение пакетов или фреймов 
могут случатьс€ посто€нно снова и снова, и это будет менее заметно дл€ 
слушател€. »зохронные передачи обеспечивают:
</p>
<ul type="square">
	<li>√арантированное выделение полосы пропускани€ шины USB.</li>
	<li>ќграниченную латентность.</li>
	<li>ќднонаправленный поток канала.</li>
	<li>ƒетектирование ошибок с помощью CRC, но без гарантии доставки (нет повторов при ошибках).</li>
	<li>–аботают только на скорост€х Full speed и high speed.</li>
	<li>Ќет переключени€ данных.</li>
</ul>
<p>
ƒл€ изохронной конечной точки максимальный размер полезной нагрузки по данным указываетс€ в дескрипторе конечной точки (<a href="http://microsin.ru/content/view/1108/44#EndpointDescriptors">endpoint descriptor</a>).
 Ётот размер может быть максимум до 1023 байт дл€ full speed и до 1024 
байт дл€ high speed. ѕоскольку максимальный размер полезной нагрузки 
вли€ет на требование к шине по полосе пропускани€, следует внимательно 
отнестись к его выбору. ≈сли ¬ы используете большую полезную нагрузку, 
то может оказатьс€ хорошим выбором задать серию альтернативных 
интерфейсов (<a href="http://microsin.ru/content/view/1108/44#AlternateSetting">alternative interfaces</a>)
 с различными изохронными размерами полезной нагрузки. ≈сли во врем€ 
энумерации хост не может предоставить ¬ашей изохронной конечной точке 
привилегированную полосу из-за ограничений полосы пропускани€, то у него
 еще будут другие варианты полосы вместо того, чтобы потерпеть неудачу 
полностью. ƒанные, посылаемые через изохронную конечную точку, могут 
быть меньше предварительно оговоренного размера, и могут изменитьс€ по 
длине от транзакции к транзакции.
</p>
<div align="center">
<table style="width: 80%" border="0" cellpadding="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transiso.gif" alt="USBinNutShell-transiso.gif" title="USBinNutShell-transiso.gif" style="border: 0px none #000000; width: 213px; height: 131px" align="bottom" border="0" height="131" width="213"></td>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transkey.gif" alt="USBinNutShell-transkey.gif" title="USBinNutShell-transkey.gif" style="border: 0px none #000000; width: 125px; height: 27px" align="bottom" border="0" height="27" width="125"></td>
		</tr>
	</tbody>
</table>
</div>
<p>
Ќа диаграмме показан формат изохронных транзакций IN и OUT. »зохронные 
транзакции не имеют стадии установлени€ св€зи (рукопожати€, handshaking 
stage) и не могут сообщать об ошибках или событи€х STALL/HALT.
</p>
<p>
<span style="color: #339966"><b>ѕередачи Bulk</b></span><a name="Bulk" title="Bulk"></a>
</p>
<p>
Bulk-передачи можно использовать дл€ большого объема быстропередаваемых 
данных. ¬ качестве примера можно привести задание по выводу на печать, 
посланное в принтер, или изображение, сгенерированное от сканера. 
Bulk-передачи предоставл€ют коррекцию ошибок полезной нагрузки с помощью
 пол€ CRC16 и механизмы детектировани€ ошибок и повторной передачи, 
гарантирующие отсутствие ошибок в передаваемых или прин€тых данных. <br>
Bulk-передачи будут использовать остаточную полосу пропускани€ шины 
после того, как все другие транзакции были распределены. ≈сли шина 
зан€та данными isochronous и/или interrupt, то данные bulk могут 
прередаватьс€ через шину медленно. —ледовательно, передачи Bulk должны 
использоватьс€ только дл€ интенсивных коммуникаций с негарантированным 
временем доставки. ќсобенности передачи Bulk:
</p>
<ul type="square">
	<li>»спользуютс€ дл€ передачи большого объема данных на высокой скорости за короткое врем€.</li>
	<li>ƒетектирование ошибок с помощью CRC, с гарантией доставки.</li>
	<li>Ќе гарантируетс€ полоса пропускани€ или минимальна€ задержка (минимальна€ латентность).</li>
	<li>ќднонаправленный поток данных канала.</li>
	<li>–аботает только на скорост€х Full speed и high speed.</li>
</ul>
<p>
Bulk-передачи поддерживаютс€ только full speed и high speed 
устройствами. ƒл€ конечных точек full speed максимальный размер пакета 
bulk бывает 8, 16, 32 или 64 байта длиной. ƒл€ конечных точек high 
speed, максимальный размер пакета может до 512 байт длиной. ≈сли 
полезна€ нагрузка данных меньше максимального размера пакета, она не 
должна быть дополнена нул€ми. Bulk-передачу считают законченной, когда 
она передала точное количество запрошенных данных, передала пакет 
меньше, чем максимальный размер оконечной точки, передала пакет нулевой 
длины.
</p>
<div align="center">
<table style="width: 80%" border="0" cellpadding="0">
	<tbody>
		<tr>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-contdata.gif" alt="USBinNutShell-contdata.gif" title="USBinNutShell-contdata.gif" style="border: 0px none #000000; width: 315px; height: 322px" align="bottom" border="0" height="322" width="315"></td>
			<td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/USBinNutShell-transkey.gif" alt="USBinNutShell-transkey.gif" title="USBinNutShell-transkey.gif" style="border: 0px none #000000; width: 125px; height: 27px" align="bottom" border="0" height="27" width="125"></td>
		</tr>
	</tbody>
</table>
</div>
<p>
Ќа диаграмме показан формат транзакций bulk IN и bulk OUT.
</p>
<p>
<b>Bulk IN</b>: когда хост готов прин€ть данные bulk, он выдает токен 
IN. ≈сли функци€ принимает токен IN с ошибкой, она игнорирует пакет. 
≈сли токен прин€т корректно, функци€ может ответить либо пакетом DATA 
(содержащим отправл€емые данные bulk), либо пакетом stall, 
(показывающим, что конечна€ точка имеет ошибку), либо пакетом NAK 
(показывающим, что конечна€ точка в работе, но у нее пока нет данных дл€
 отправки).
</p>
<p>
<b>Bulk OUT</b>: когда хост хочет отправить функции пакет bulk data, он 
выдает токен OUT, за которым идет data пакет, содержащий данные bulk. 
≈сли люба€ часть токена OUT или пакета data повреждена, функци€ 
игнорирует пакет. ≈сли буфер конечной точки функции пуст, функци€ 
вдвигает данные в буфер конечной точки и выдает ACK, информиру€ хост об 
успешно прин€тых данных. ≈сли буфер конечной точки функции не пуст по 
причине обработки предыдущего пакета, функци€ возвращает NAK. ќднако 
если конечна€ точка в состо€нии ошибки, и еЄ halt-бит установлен, 
функци€ возвращает STALL.
</p>
<p>
<span style="color: #339966"><b><b><b><b>”правление полосой пропускани€ </b></b></b></b></span>
</p>
<p>
’ост отвечает за управление полосой пропускани€ шины. Ёто происходит при
 энумерации, и конфигурировании изохронных конечных точек и конечных 
точек interrupt через операции на шине. —пецификаци€ накладывает 
ограничени€ на шину, которые разрешают выделение не более 90% всех 
фреймов дл€ периодических передач (Interrupt или Isochronous) на шине 
full speed. Ќа шине high speed это ограничение уменьшено - не более 80% 
микрофреймов можно выделить дл€ периодических передач.
</p>
<p>
“аким образом, очевидно - если у ¬ас есть шина, очень нагруженна€ 
периодическими передачами, то оставшиес€ 10% оставлены дл€ передач 
управлени€ (control transfers), и как только они будут распределены 
(обработаны), передачи bulk получат оставшуюс€ часть полосы.
</p>
<p>
[<a href="http://microsin.net/programming/arm-working-with-usb/usb-in-a-nutshell-part2.html" target="_self"><b>ѕродолжение статьи...</b></a>]
</p>
			</td>
		</tr>
					<tr>
				<td colspan="2" class="modifydate" align="left">
					ѕоследнее обновление ( 29.11.2014 )
				</td>
			</tr>
					</tbody></table>

		<span class="article_seperator">&nbsp;</span>

		<br>


<script type="text/javascript">
var xajaxRequestUri='',xajaxDebug=false,xajaxStatusMessages=false,xajaxWaitCursor=true,xajaxDefinedGet=0,xajaxDefinedPost=1;
function jc_setup(){xajaxRequestUri='http://microsin.ru/index2.php?option=com_jcomments&amp;Itemid=44&amp;no_html=1';xajaxDebug=false,xajaxStatusMessages=false,xajaxWaitCursor=true,xajaxDefinedGet=0,xajaxDefinedPost=1;
xajax.loadingFunction=function(){xajax.$('jc_busy').style.display='block';};xajax.doneLoadingFunction=function(){xajax.$('jc_busy').style.display='none';}}
</script>
<script src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/xajax_002.js" type="text/javascript"></script>


<script src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/jcomments.js" type="text/javascript"></script>

<div id="jc">
<div id="comments">
	
	
		<h4> омментарии&nbsp;<a href="http://microsin.ru/index2.php?option=com_jcomments&amp;task=rss&amp;object_id=1107&amp;object_group=com_content&amp;no_html=1" title="RSS лента комментариев этой записи." target="_blank"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/jc_rss.gif" alt="" border="0"></a><span class="refresh" title="ќбновить список комментариев" onclick="jc_showPage(1107,'com_content',0,0);">&nbsp;</span></h4>
		
		<center> <div id="nav-top"><span class="activepage"><b>1</b></span>

<span onclick="jc_showPage(1107, 'com_content', 2);" class="page" onmouseover="this.className='hoverpage';" onmouseout="this.className='page';">2</span>
<span onclick="jc_showPage(1107, 'com_content', 3);" class="page" onmouseover="this.className='hoverpage';" onmouseout="this.className='page';">3</span></div> </center>
		<ol id="comments-list" class="commentlist">
			
					<li class="odd" id="comment-2581"><span class="quote" onclick="javascript:jc_quoteComment(2581);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2581" id="comment-2581">#22</a> <span class="comment-author">Hetman</span>  <br> <span class="comment-date">2014-11-29</span><span class="comment-time">19:25:20</span>  <span class="comment-body" id="comment-body-2581">Ѕедный, еще и какойЕ <br>ѕрочтите очень внимательно, что написано в этом месте:<br> —тади€ status stage также имеет два различных сценари€, в зависимости от направлени€ передачи данных.<br><br>—ценарий IN: если хост отправил токенЕ<br><br>» посмотрите кака€ картинка там нарисована. Ќадо помен€ть местами ее и следующуюЕ<br><br>microsin: благодарю, поправил.</span>  </li>
				
					<li class="even" id="comment-2580"><span class="quote" onclick="javascript:jc_quoteComment(2580);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2580" id="comment-2580">#21</a> <span class="comment-author">Hetman</span>  <br> <span class="comment-date">2014-11-29</span><span class="comment-time">18:42:05</span>  <span class="comment-body" id="comment-body-2580">ќшибку
 подтверждаю. —транно, что вы ее не видите. ” мен€ вообще талант 
находить ошибки. я в книгах уважаемых авторов находил кос€ки не раз, и 
даже заставил Microchip переделать даташит на целую серию контроллеров. 
Ќо при этом остаюсь бедным преподомЕ кака€ жалостьЕ <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/smile.gif" alt="" border="0"><br><br>microsin: не верю что-то, что ¬ы "бедный" препод. —корее всего небедный =). »ли такое положение ¬ас чем-то устраивает.</span>  </li>
				
					<li class="odd" id="comment-2579"><span class="quote" onclick="javascript:jc_quoteComment(2579);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2579" id="comment-2579">#20</a> <span class="comment-author">Hetman</span>  <br> <span class="comment-date">2014-11-29</span><span class="comment-time">17:26:06</span>  <span class="comment-body" id="comment-body-2579">Ќашел опечатку. “ам, где описываетс€ передача Control, cтади€ status stage - рисунки сценариев IN и OUT перепутаны местами.<br>ј в общем, замечательный вдумчивый обработанный перевод. „итаетс€ запоем как увлекательный роман. <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/smile.gif" alt="" border="0"> <br>—пасибо
 автору. “еперь USB не боюсь, хот€ действительно "навороченный" 
протокол. ’от€ принципы остались те же. «накомые слова (handshacking) 
еще с протоколов ISA. “акой же принцип передачи адреса хостом как и в 
I2C и во всех последовательны<span style="font-size:0px;padding:0;margin:0;"> </span>х
 протоколах. «накомый acknowlege (ACK) при успешной передаче. 
 лассические арбитры (PID). Ќо все эти режимы, типы передач, точки, 
безусловно, напр€гают. <br>≈ще раз спасибо автору. <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/smile.gif" alt="" border="0"><br><br>microsin: честно говор€, никакой опечатки не заметил. ”верены?</span>  </li>
				
					<li class="even" id="comment-2549"><span class="quote" onclick="javascript:jc_quoteComment(2549);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2549" id="comment-2549">#19</a> <span class="comment-author">WitFed</span>  <br> <span class="comment-date">2014-09-02</span><span class="comment-time">12:15:49</span>  <span class="comment-body" id="comment-body-2549">ѕосле фразы: "ѕосле этого устройство попытаетс€ отправить Device Descriptor, что произойдет в следующей транзакции USB."<br>«десь неточность, дескриптор устройства занимает не 12 байт, а 18 (12 в HEX), требу€ 3 транзакций: 8, 8 и 2 байта.</span>  </li>
				
					<li class="odd" id="comment-2542"><span class="quote" onclick="javascript:jc_quoteComment(2542);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2542" id="comment-2542">#18</a> <span class="comment-author">WitFed</span>  <br> <span class="comment-date">2014-08-14</span><span class="comment-time">11:21:41</span>  <span class="comment-body" id="comment-body-2542">¬сЄ прекрасно вылизано по отношению к "монстроидальным<span style="font-size:0px;padding:0;margin:0;"> </span>" оригиналам, спасибо!<br> усок
 "и включает includes a setup packet", веро€тно, нужно освободить от 
"includes a". ј за€вленный механизм посыла сообщений об описках по 
Shift-Enter почему-то не работает здесь, выделение даже делаетс€ с 
трудом.</span>  </li>
				
					<li class="even" id="comment-2513"><span class="quote" onclick="javascript:jc_quoteComment(2513);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2513" id="comment-2513">#17</a> <span class="comment-author">RAN</span>  <br> <span class="comment-date">2014-04-12</span><span class="comment-time">16:29:59</span>  <span class="comment-body" id="comment-body-2513">Microsin, респект за перевод!</span>  </li>
				
					<li class="odd" id="comment-2483"><span class="quote" onclick="javascript:jc_quoteComment(2483);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2483" id="comment-2483">#16</a> <span class="comment-author">»горь</span>  <br> <span class="comment-date">2014-01-15</span><span class="comment-time">10:47:01</span>  <span class="comment-body" id="comment-body-2483">—пасибо, первый шаг сделал. Ќо € не могу скачать программу под Windows, ссылки не работающие.<br><br>microsin:
 благодарю. Ќо про какую программу ¬ы говорите, какие ссылки не 
работающие?.. Ќапишите мне пожалуйста на email (см. раздел  онтакты).</span>  </li>
				
					<li class="even" id="comment-2430"><span class="quote" onclick="javascript:jc_quoteComment(2430);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2430" id="comment-2430">#15</a> <span class="comment-author">ohmjke</span>  <br> <span class="comment-date">2013-09-17</span><span class="comment-time">23:32:57</span>  <span class="comment-body" id="comment-body-2430">Ќе
 понимаю, зачем вообще стади€ status stage? ¬едь всЄ равно во врем€ 
стадии data stage каждый пакет data подтверждаетс€ пакетом ACK.</span>  </li>
				
					<li class="odd" id="comment-2411"><span class="quote" onclick="javascript:jc_quoteComment(2411);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2411" id="comment-2411">#14</a> <span class="comment-author">dtvims</span>  <br> <span class="comment-date">2013-08-09</span><span class="comment-time">07:39:12</span>  <span class="comment-body" id="comment-body-2411">Ќашлась опечаточка:<br>Ќа низкоскоростных<span style="font-size:0px;padding:0;margin:0;"> </span> (low speed) и полноскоростных<span style="font-size:0px;padding:0;margin:0;"> </span> (full speed) устройствах дифференциальна<span style="font-size:0px;padding:0;margin:0;"> </span>€
 С1Т передаетс€ путем повышени€ уровн€ D+ свыше +2.8V резистором 15 ќм, 
подключенным к +3.6V и D- ниже +0.3V резистором 1.5 ќм, подключенным к 
земле. ƒифференциальны<span style="font-size:0px;padding:0;margin:0;"> </span>й С0Т передаетс€ тем же способом, только уровни мен€ютс€ на противоположные<span style="font-size:0px;padding:0;margin:0;"> </span> - D- свыше 2.8V и D+ ниже 0.3V.<br><br>„то противоречит действительност<span style="font-size:0px;padding:0;margin:0;"> </span>и. 15 ќм подключаютс€ к земле, а 1.5 ќм к плюсу. —равните с оригиналом:<br><br>On
 low and full speed devices, a differential С1Т is transmitted by 
pulling D+ over 2.8V with a 15K ohm resistor pulled to ground and D- 
under 0.3V with a 1.5K ohm resistor pulled to 3.6V. A differential С0Т 
on the other hand is a D- greater than 2.8V and a D+ less than 0.3V with
 the same appropriate pull down/up resistors.<br><br>microsin: если и 
опечатка, то скорее всего в оригинале. —кажите пожалуйста, как можно 
подн€ть уровень D+ (pulling D+ over 2.8V), если подключить резистор 15 
кќм к земле (with a 15K ohm resistor pulled to ground)?.. «вучит как 
бред. “о же самое можно сказать и про сигнал D-, потому что невозможно 
опустить напр€жение ниже 0.3V (D- under 0.3V) резистором 1.5 кќм, 
подключенным к 3.6V (1.5K ohm resistor pulled to 3.6V).</span>  </li>
				
					<li class="even" id="comment-2279"><span class="quote" onclick="javascript:jc_quoteComment(2279);" title="÷итировать"></span>  <a class="comment-anchor" href="http://microsin.ru/content/view/1107/44/#comment-2279" id="comment-2279">#13</a> <span class="comment-author">¬€чеслав</span>  <br> <span class="comment-date">2013-03-01</span><span class="comment-time">04:38:07</span>  <span class="comment-body" id="comment-body-2279">—пасибо за хороший материал, как жаль что не нашел этого раньше!</span>  </li>
				
		</ol>
		<center> <div id="nav-bottom"> <span class="activepage"><b>1</b></span>

<span onclick="jc_showPage(1107, 'com_content', 2);" class="page" onmouseover="this.className='hoverpage';" onmouseout="this.className='page';">2</span>
<span onclick="jc_showPage(1107, 'com_content', 3);" class="page" onmouseover="this.className='hoverpage';" onmouseout="this.className='page';">3</span> </div> </center>
		<div id="comments-rss"><a href="http://microsin.ru/index2.php?option=com_jcomments&amp;task=rss&amp;object_id=1107&amp;object_group=com_content&amp;no_html=1" target="_blank">RSS лента комментариев этой записи.</a></div>
	
</div>
<div id="jc_busy"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/jc_busy.gif" alt=""></div>

        <br>
	<h4>ƒобавить комментарий</h4>
	<script language="JavaScript" type="text/javascript">
		
	</script>
	<a id="addcomments" href="#addcomments"></a>
	<form id="comments-form" name="comments-form" action="javascript:void(null);">
	
	
	<p>
		<input id="comments-form-name" name="name" maxlength="20" size="22" tabindex="1" onfocus="javascript:this.className='selected';" onblur="javascript:this.className='';" type="text">
		<label for="comments-form-name">»м€ (об€зательное)</label>
	</p>
	
	
	<p> <input id="comments-form-homepage" name="homepage" size="22" tabindex="3" onfocus="javascript:this.className='selected';" onblur="javascript:this.className='';" type="text"> <label for="comments-form-homepage"> —айт </label> </p>
	<p>
	<img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/laugh.gif" onclick="jc_smile(':D');" alt=":D"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/lol.gif" onclick="jc_smile(':lol:');" alt=":lol:"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/smile.gif" onclick="jc_smile(':-)');" alt=":-)"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/wink.gif" onclick="jc_smile(';-)');" alt=";-)"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/cool.gif" onclick="jc_smile('8)');" alt="8)"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/normal.gif" onclick="jc_smile(':-|');" alt=":-|"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/whistling.gif" onclick="jc_smile(':-*');" alt=":-*"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/redface.gif" onclick="jc_smile(':oops:');" alt=":oops:"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/sad.gif" onclick="jc_smile(':sad:');" alt=":sad:"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/cry.gif" onclick="jc_smile(':cry:');" alt=":cry:"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/surprised.gif" onclick="jc_smile(':o');" alt=":o"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/confused.gif" onclick="jc_smile(':-?');" alt=":-?"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/sick.gif" onclick="jc_smile(':-x');" alt=":-x"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/shocked.gif" onclick="jc_smile(':eek:');" alt=":eek:"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/sleeping.gif" onclick="jc_smile(':zzz');" alt=":zzz"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/tongue.gif" onclick="jc_smile(':P');" alt=":P"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/rolleyes.gif" onclick="jc_smile(':roll:');" alt=":roll:"><img class="smile" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/unsure.gif" onclick="jc_smile(':sigh:');" alt=":sigh:"><br>
	
		<textarea id="comments-form-comment" onchange="jc_changed(1000);jc_storeCaret(this);" onkeyup="jc_changed(1000);" onselect="jc_storeCaret(this);" onclick="jc_storeCaret(this);" name="comment" cols="65" rows="5" tabindex="4" onfocus="javascript:this.className='selected';" onblur="javascript:this.className='';" onkeypress="return jc_keypress(event);"></textarea>
		
			<br><label for="comments-form-comment">ќсталось: &nbsp;<span id="comments-form-comment-length">1000</span>&nbsp; символов</label>
		
		
	</p>
	<p>
	
	<img class="captcha" id="comments-form-captcha-image" name="captcha-image" src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/index2.jpg" alt="«ащитный код" height="60" width="120"><br> <span class="captcha" onclick="xajax.$('comments-form-captcha-image').src='http://microsin.ru/index2.php?option=com_jcomments&amp;task=captcha&amp;no_html=1&amp;ac=' + new String(Math.random())">ќбновить</span><br> <input class="captcha" id="comments-form-captcha-refid" name="captcha-refid" size="5" tabindex="6" onfocus="javascript:this.className='captcha-selected';" onblur="javascript:this.className='captcha';" type="text"><br>
	<input class="button" name="submit" value="ќтправить (Ctrl+Enter)" tabindex="7" onclick="jc_sendComment();" type="button">
	</p>
	<input name="object_id" value="1107" type="hidden">
	<input name="object_group" value="com_content" type="hidden">
	</form>

<div id="comments-footer" align="center"><a href="http://www.joomlatune.ru/" title="JComments" target="_blank">JComments</a></div>
</div>
<script type="text/javascript">
function jc_addEvent(o,e,f){if(o.addEventListener){o.addEventListener(e,f,false);return true;}else if(o.attachEvent){var r=o.attachEvent("on"+e,f);return r;}else{return false;}}
function jc_onload(){if(arguments.callee.done) return;arguments.callee.done=true;if(_timer){clearInterval(_timer);_timer=null;}
if(xajaxLoaded){var l=document.location.href,i=l.lastIndexOf('#comment-');
if(i!=0){var c=l.substring(i+9,l.length);if(!isNaN(c)){jc_showComment(c);}}

}else{window.setTimeout(jc_onload,5000);}}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",jc_onload,false);}
/*@cc_on @*/
/*@if (@_win32)
document.write("<script id=__ie_onload defer src=javascript:void(0)><\/script>");
var script=document.getElementById("__ie_onload");script.onreadystatechange=function(){if(this.readyState=="complete"){jc_onload();}};
/*@end @*/
if(/WebKit/i.test(navigator.userAgent)){var _timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){jc_onload();}},10);}
jc_addEvent(window,'load',jc_onload);
</script>			<table style="margin-top: 25px;" align="center">
			<tbody><tr>
									<th class="pagenav_prev">
						<a href="http://microsin.ru/content/view/1108/44/">
							&lt; ѕред.</a>
					</th>
										<td width="50">&nbsp;

					</td>
										<th class="pagenav_next">
						<a href="http://microsin.ru/content/view/1104/44/">
							—лед. &gt;</a>
					</th>
								</tr>
			</tbody></table>
						<div class="back_button">
				<a href="javascript:history.go(-1)">
					Ќазад</a>
			</div>
			              <!-- Bottom Modules -->
              <p></p>
                            </td>
              <!-- RIGHT Modules -->
                          </tr>
          </tbody></table>
          </td>
        </tr>
      </tbody></table>
      </td>
      <td background="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20(%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE)_files/shad_right.gif" valign="top">
      <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/shad_top_right.gif" border="0" height="17" width="11"></td>
    </tr>
    <tr>
      <td><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/shad_bottom_left.gif" border="0" height="19" width="11"></td>
      <td background="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20(%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE)_files/shad_bottom.gif" width="100%">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tbody><tr>
          <td>
          <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/shad_bottom_inner_left.gif" border="0" height="19" width="19"></td>
          <td align="left"><a href="#top"><img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/top_of_page.gif" alt="Top of Page" border="0" vspace="5"></a></td>
          <td align="right" width="100%"><!--закомментировано дл€ устранени€ ошибки "File does not exist:
           /home/microsig/public_html/images/poweredbyLong.gif"<img src="images/poweredbyLong.gif" width="169" height="8" vspace="5" border="0" alt="Powered by Mambo Open Source">--></td>  
          <td>
          <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/shad_bottom_inner_right.gif" border="0" height="19" width="19"></td>
        </tr>
      </tbody></table>
      </td>
      <td>
      <img src="microsin%20-%20USB%20in%20a%20NutShell%20-%20%D0%BF%D1%83%D1%82%D0%B5%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20%D0%BF%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D1%83%20USB%20%28%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE%29_files/shad_bottom_right.gif" border="0" height="19" width="11"></td>
    </tr>
  </tbody></table>
  <table align="center" border="0" cellpadding="3" cellspacing="0" width="780">
    <tbody><tr>
      <td align="center">
        &nbsp;        <div align="center">
	microsin © 2015 
</div>
<!--div align="center">
	</div-->      </td>
    </tr>
  </tbody></table>

<div style="position: absolute; display: none; width: 375px; height: 380px; top: 50px; left: 50px; z-index: 2;" id="MistWindow"></div></body></html>
<!-- 1445329071 -->